System.register([],(function(t){"use strict";return{execute:function(){t({dispose:Ct,position_from_like:te,variable:ct});var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},e(t,s)};function s(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}function i(t,e,s,i){return new(s||(s=Promise))((function(r,n){function o(t){try{a(i.next(t))}catch(t){n(t)}}function h(t){try{a(i.throw(t))}catch(t){n(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,h)}a((i=i.apply(t,e||[])).next())}))}function r(t,e){var s,i,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function h(h){return function(a){return function(h){if(s)throw new TypeError("Generator is already executing.");for(;n&&(n=0,h[0]&&(o=0)),o;)try{if(s=1,i&&(r=2&h[0]?i.return:h[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,h[1])).done)return r;switch(i=0,r&&(h=[2&h[0],r.value]),h[0]){case 0:case 1:r=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,i=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==h[0]&&2!==h[0])){o=0;continue}if(3===h[0]&&(!r||h[1]>r[0]&&h[1]<r[3])){o.label=h[1];break}if(6===h[0]&&o.label<r[1]){o.label=r[1],r=h;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(h);break}r[2]&&o.ops.pop(),o.trys.pop();continue}h=e.call(t,o)}catch(t){h=[6,t],i=0}finally{s=r=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,a])}}}function n(t){var e="function"==typeof Symbol&&Symbol.iterator,s=e&&t[e],i=0;if(s)return s.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var i,r,n=s.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(r)throw r.error}}return o}function h(t,e,s){if(s||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function a(t){return this instanceof a?(this.v=t,this):new a(t)}function c(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=s.apply(t,e||[]),n=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){r[t]&&(i[t]=function(e){return new Promise((function(s,i){n.push([t,e,s,i])>1||h(t,e)}))})}function h(t,e){try{(s=r[t](e)).value instanceof a?Promise.resolve(s.value.v).then(c,l):u(n[0][2],s)}catch(t){u(n[0][3],t)}var s}function c(t){h("next",t)}function l(t){h("throw",t)}function u(t,e){t(e),n.shift(),n.length&&h(n[0][0],n[0][1])}}function l(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,s=t[Symbol.asyncIterator];return s?s.call(t):(t=n(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=t[s]&&function(e){return new Promise((function(i,r){(function(t,e,s,i){Promise.resolve(i).then((function(e){t({value:e,done:s})}),e)})(i,r,(e=t[s](e)).done,e.value)}))}}}function u(t){return"function"==typeof t}function d(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}"function"==typeof SuppressedError&&SuppressedError;var f=d((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function p(t,e){if(t){var s=t.indexOf(e);0<=s&&t.splice(s,1)}}var g=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,s,i,r;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var c=n(a),l=c.next();!l.done;l=c.next()){l.value.remove(this)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if(u(d))try{d()}catch(t){r=t instanceof f?t.errors:[t]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=n(p),z=g.next();!z.done;z=g.next()){var b=z.value;try{m(b)}catch(t){r=null!=r?r:[],t instanceof f?r=h(h([],o(r)),o(t.errors)):r.push(t)}}}catch(t){s={error:t}}finally{try{z&&!z.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}}if(r)throw new f(r)}},t.prototype.add=function(e){var s;if(e&&e!==this)if(this.closed)m(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(s=this._finalizers)&&void 0!==s?s:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&p(e,t)},t.prototype.remove=function(e){var s=this._finalizers;s&&p(s,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),z=g.EMPTY;function b(t){return t instanceof g||t&&"closed"in t&&u(t.remove)&&u(t.add)&&u(t.unsubscribe)}function m(t){u(t)?t():t.unsubscribe()}var y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},v={setTimeout:function(t,e){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];return setTimeout.apply(void 0,h([t,e],o(s)))},clearTimeout:function(t){var e=v.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function x(t){v.setTimeout((function(){throw t}))}function w(){}function _(t){t()}var k=function(t){function e(e){var s=t.call(this)||this;return s.isStopped=!1,e?(s.destination=e,b(e)&&e.add(s)):s.destination=O,s}return s(e,t),e.create=function(t,e,s){return new E(t,e,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(g),A=Function.prototype.bind;function S(t,e){return A.call(t,e)}var M=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){$(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){$(t)}else $(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){$(t)}},t}(),E=function(t){function e(e,s,i){var r,n,o=t.call(this)||this;u(e)||!e?r={next:null!=e?e:void 0,error:null!=s?s:void 0,complete:null!=i?i:void 0}:o&&y.useDeprecatedNextContext?((n=Object.create(e)).unsubscribe=function(){return o.unsubscribe()},r={next:e.next&&S(e.next,n),error:e.error&&S(e.error,n),complete:e.complete&&S(e.complete,n)}):r=e;return o.destination=new M(r),o}return s(e,t),e}(k);function $(t){x(t)}var O={closed:!0,next:w,error:function(t){throw t},complete:w},F="function"==typeof Symbol&&Symbol.observable||"@@observable";function C(t){return t}var L=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var s=new t;return s.source=this,s.operator=e,s},t.prototype.subscribe=function(t,e,s){var i,r=this,n=(i=t)&&i instanceof k||function(t){return t&&u(t.next)&&u(t.error)&&u(t.complete)}(i)&&b(i)?t:new E(t,e,s);return _((function(){var t=r,e=t.operator,s=t.source;n.add(e?e.call(n,s):s?r._subscribe(n):r._trySubscribe(n))})),n},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var s=this;return new(e=P(e))((function(e,i){var r=new E({next:function(e){try{t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:e});s.subscribe(r)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[F]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return(0===(t=e).length?C:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)})(this)},t.prototype.toPromise=function(t){var e=this;return new(t=P(t))((function(t,s){var i;e.subscribe((function(t){return i=t}),(function(t){return s(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function P(t){var e;return null!==(e=null!=t?t:y.Promise)&&void 0!==e?e:Promise}function R(t){return function(e){if(function(t){return u(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function B(t,e,s,i,r){return new V(t,e,s,i,r)}var V=function(t){function e(e,s,i,r,n,o){var h=t.call(this,e)||this;return h.onFinalize=n,h.shouldUnsubscribe=o,h._next=s?function(t){try{s(t)}catch(t){e.error(t)}}:t.prototype._next,h._error=r?function(t){try{r(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,h._complete=i?function(){try{i()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,h}return s(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;t.prototype.unsubscribe.call(this),!s&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(k),W=d((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),j=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(e,t),e.prototype.lift=function(t){var e=new I(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new W},e.prototype.next=function(t){var e=this;_((function(){var s,i;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=n(e.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(t)}}catch(t){s={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}}}))},e.prototype.error=function(t){var e=this;_((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var s=e.observers;s.length;)s.shift().error(t)}}))},e.prototype.complete=function(){var t=this;_((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,s=this,i=s.hasError,r=s.isStopped,n=s.observers;return i||r?z:(this.currentObservers=null,n.push(t),new g((function(){e.currentObservers=null,p(n,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,s=e.hasError,i=e.thrownError,r=e.isStopped;s?t.error(i):r&&t.complete()},e.prototype.asObservable=function(){var t=new L;return t.source=this,t},e.create=function(t,e){return new I(t,e)},e}(L),I=function(t){function e(e,s){var i=t.call(this)||this;return i.destination=e,i.source=s,i}return s(e,t),e.prototype.next=function(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===s||s.call(e,t)},e.prototype.error=function(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===s||s.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,s;return null!==(s=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==s?s:z},e}(j),T=function(t){function e(e){var s=t.call(this)||this;return s._value=e,s}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var s=t.prototype._subscribe.call(this,e);return!s.closed&&e.next(this._value),s},e.prototype.getValue=function(){var t=this,e=t.hasError,s=t.thrownError,i=t._value;if(e)throw s;return this._throwIfClosed(),i},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(j),N=function(){return Date.now()},q=function(t){function e(e,s){return t.call(this)||this}return s(e,t),e.prototype.schedule=function(t,e){return this},e}(g),Y={setInterval:function(t,e){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];return setInterval.apply(void 0,h([t,e],o(s)))},clearInterval:function(t){var e=Y.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},X=function(t){function e(e,s){var i=t.call(this,e,s)||this;return i.scheduler=e,i.work=s,i.pending=!1,i}return s(e,t),e.prototype.schedule=function(t,e){var s;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,s){return void 0===s&&(s=0),Y.setInterval(t.flush.bind(t,this),s)},e.prototype.recycleAsyncId=function(t,e,s){if(void 0===s&&(s=0),null!=s&&this.delay===s&&!1===this.pending)return e;null!=e&&Y.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(t,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var s,i=!1;try{this.work(t)}catch(t){i=!0,s=t||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,s=this.scheduler,i=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,p(i,this),null!=e&&(this.id=this.recycleAsyncId(s,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(q),H=function(){function t(e,s){void 0===s&&(s=t.now),this.schedulerActionCtor=e,this.now=s}return t.prototype.schedule=function(t,e,s){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(s,e)},t.now=N,t}(),D=new(function(t){function e(e,s){void 0===s&&(s=H.now);var i=t.call(this,e,s)||this;return i.actions=[],i._active=!1,i}return s(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var s;this._active=!0;do{if(s=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,s){for(;t=e.shift();)t.unsubscribe();throw s}}},e}(H))(X),U=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};var G="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Z(t){if(t instanceof L)return t;if(null!=t){if(function(t){return u(t[F])}(t))return h=t,new L((function(t){var e=h[F]();if(u(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(U(t))return o=t,new L((function(t){for(var e=0;e<o.length&&!t.closed;e++)t.next(o[e]);t.complete()}));if(u(null==(i=t)?void 0:i.then))return s=t,new L((function(t){s.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,x)}));if(function(t){return Symbol.asyncIterator&&u(null==t?void 0:t[Symbol.asyncIterator])}(t))return J(t);if(function(t){return u(null==t?void 0:t[G])}(t))return e=t,new L((function(t){var s,i;try{for(var r=n(e),o=r.next();!o.done;o=r.next()){var h=o.value;if(t.next(h),t.closed)return}}catch(t){s={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}t.complete()}));if(function(t){return u(null==t?void 0:t.getReader)}(t))return J(function(t){return c(this,arguments,(function(){var e,s,i;return r(this,(function(r){switch(r.label){case 0:e=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,a(e.read())];case 3:return s=r.sent(),i=s.value,s.done?[4,a(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,a(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}(t))}var e,s,i,o,h;throw function(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(t)}function J(t){return new L((function(e){(function(t,e){var s,n,o,h;return i(this,void 0,void 0,(function(){var i,a;return r(this,(function(r){switch(r.label){case 0:r.trys.push([0,5,6,11]),s=l(t),r.label=1;case 1:return[4,s.next()];case 2:if((n=r.sent()).done)return[3,4];if(i=n.value,e.next(i),e.closed)return[2];r.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=r.sent(),o={error:a},[3,11];case 6:return r.trys.push([6,,9,10]),n&&!n.done&&(h=s.return)?[4,h.call(s)]:[3,8];case 7:r.sent(),r.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Q(t,e){return R((function(s,i){var r=0;s.subscribe(B(i,(function(s){i.next(t.call(e,s,r++))})))}))}var K=Array.isArray;function tt(t){return Q((function(e){return function(t,e){return K(e)?t.apply(void 0,h([],o(e))):t(e)}(t,e)}))}function et(t,e,s){return void 0===s&&(s=1/0),u(e)?et((function(s,i){return Q((function(t,r){return e(s,t,i,r)}))(Z(t(s,i)))}),s):("number"==typeof e&&(s=e),R((function(e,i){return function(t,e,s,i,r,n,o,h){var a=[],c=0,l=0,u=!1,d=function(){!u||a.length||c||e.complete()},f=function(t){return c<i?p(t):a.push(t)},p=function(t){n&&e.next(t),c++;var h=!1;Z(s(t,l++)).subscribe(B(e,(function(t){null==r||r(t),n?f(t):e.next(t)}),(function(){h=!0}),void 0,(function(){if(h)try{c--;for(var t=function(){var t=a.shift();o?function(t,e,s,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var n=e.schedule((function(){s(),r?t.add(this.schedule(null,i)):this.unsubscribe()}),i);t.add(n)}(e,o,(function(){return p(t)})):p(t)};a.length&&c<i;)t();d()}catch(t){e.error(t)}})))};return t.subscribe(B(e,f,(function(){u=!0,d()}))),function(){null==h||h()}}(e,i,t,s)})))}var st=["addListener","removeListener"],it=["addEventListener","removeEventListener"],rt=["on","off"];function nt(t,e,s,i){if(u(s)&&(i=s,s=void 0),i)return nt(t,e,s).pipe(tt(i));var r=o(function(t){return u(t.addEventListener)&&u(t.removeEventListener)}(t)?it.map((function(i){return function(r){return t[i](e,r,s)}})):function(t){return u(t.addListener)&&u(t.removeListener)}(t)?st.map(ot(t,e)):function(t){return u(t.on)&&u(t.off)}(t)?rt.map(ot(t,e)):[],2),n=r[0],h=r[1];if(!n&&U(t))return et((function(t){return nt(t,e,s)}))(Z(t));if(!n)throw new TypeError("Invalid event target");return new L((function(t){var e=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return t.next(1<e.length?e:e[0])};return n(e),function(){return h(e)}}))}function ot(t,e){return function(s){return function(i){return t[s](e,i)}}}class ht{#t;constructor(t){this.#t=t}subscribe(t){const e=this.#t.subscribe(t);return{dispose(){e.unsubscribe()}}}}class at{#e;constructor(t,e={}){this.#e=t}get(){return this.#e.getValue()}set(t){this.#e.next(t)}asObservable(){return new ht(this.#e.asObservable())}}function ct(t,e={}){const s=new T(t);return new at(s,e)}t("Variable",at);const lt=Math.abs;function ut(t,e,s){let i=lt(t[e][e]),r=e;for(let n=e+1;n<s;n++)lt(t[n][e])>i&&(i=lt(t[n][e]),r=n);return r}function dt(t,e,s,i){const r=i+1;for(let i=e;i<r;i++){const r=t[s][i];t[s][i]=t[e][i],t[e][i]=r}}function ft(t,e,s){for(let i=e+1;i<s;i++){const r=-t[i][e]/t[e][e];for(let n=e;n<s+1;n++)e===n?t[i][n]=0:t[i][n]+=r*t[e][n]}}const pt=Math.sqrt;function gt(t){return 0===(e=t).x&&0===e.y&&function(t){return 0===t.b}(t)&&0===t.a&&0===t.b;var e}const zt=-1*Math.random();function bt(t){return t.lock(),t}class mt{#s;#i=zt;#r=ct(this);change$=this.#r.asObservable();constructor(t=0,e=0,s=0,i=0){this.#s=[s,t,e,i]}static scalar(t){return new mt(0,0,t,0)}static bivector(t){return new mt(0,0,0,t)}static spinor(t,e){return new mt(0,0,t,e)}static vector(t,e){return new mt(t,e,0,0)}isLocked(){return this.#i!==zt}isMutable(){return this.#i===zt}lock(){if(this.#i!==zt)throw new Error("already locked");return this.#i=Math.random(),this.#i}unlock(t){if(this.#i===zt)throw new Error("not locked");if(this.#i===t)return this.#i=zt,this;throw new Error("unlock denied")}get a(){return this.#s[0]}set a(t){"number"==typeof t&&this.a!==t&&(this.#s[0]=t,this.#r.set(this))}get x(){return this.#s[1]}set x(t){"number"==typeof t&&this.x!==t&&(this.#s[1]=t,this.#r.set(this))}get y(){return this.#s[2]}set y(t){"number"==typeof t&&this.y!==t&&(this.#s[2]=t,this.#r.set(this))}get b(){return this.#s[3]}set b(t){"number"==typeof t&&this.b!==t&&(this.#s[3]=t,this.#r.set(this))}static one=bt(new mt(0,0,1,0));static zero=bt(new mt(0,0,0,0));static ex=bt(new mt(1,0,0,0));static ey=bt(new mt(0,1,0,0));static I=bt(new mt(0,0,0,1));static add(t,e){const s=t.x+e.x,i=t.y+e.y,r=t.a+e.a,n=t.b+e.b;return new mt(s,i,r,n)}static copy(t){return new mt(t.x,t.y,t.a,t.b)}static fromBivector(t){return mt.bivector(t.b)}static fromScalar(t){return mt.scalar(t.a)}static fromSpinor(t){return mt.spinor(t.a,t.b)}static fromVector(t){return mt.vector(t.x,t.y)}static rotorFromDirections(t,e){return new mt(0,0,0,0).rotorFromDirections(t,e)}static rotorFromVectorToVector(t,e){return new mt(0,0,0,0).rotorFromVectorToVector(t,e)}static sub(t,e){const s=t.x-e.x,i=t.y-e.y,r=t.a-e.a,n=t.b-e.b;return new mt(s,i,r,n)}static subtract(t,e){return mt.sub(t,e)}static ratioBetween(t,e){return(t.x*e.x+t.y*e.y)/(t.magnitude()*e.magnitude())}static angleBetween(t,e){const s=t.x-e.x,i=t.y-e.y;return Math.atan2(i,s)}static distanceBetween(t,e){return Math.sqrt(mt.distanceBetweenSquared(t,e))}static distanceBetweenSquared(t,e){const s=t.x-e.x,i=t.y-e.y;return s*s+i*i}add2(t,e){return gt(t)?this.set(e.x,e.y,e.a,e.b):gt(e)?this.set(t.x,t.y,t.a,t.b):this.set(t.x+e.x,t.y+e.y,t.a+e.a,t.b+e.b)}addPseudo(t){return this.isLocked()?bt(this.clone().addPseudo(t)):0===t?this:this.set(this.x,this.y,this.a,this.b+t)}addScalar(t,e=1){return this.isLocked()?bt(this.clone().addScalar(t,e)):this.isZero()?(this.a=t*e,this):(0===t||0===e||(this.a+=t*e),this)}conj(){return this.isLocked()?bt(this.clone().conj()):this.set(-this.x,-this.y,this.a,-this.b)}copy(t){return this.set(t.x,t.y,t.a,t.b)}copySpinor(t){return this.set(0,0,t.a,t.b)}copyVector(t){return this.set(t.x,t.y,0,0)}clear(){return this.set(0,0,0,0)}clone(){return new mt(this.x,this.y,this.a,this.b)}div(t){return this.isLocked()?bt(this.clone().div(t)):0===(e=t).x&&0===e.y&&0===e.b?this.scale(1/t.a):this.mul(mt.copy(t).inv());var e}ext(t){if(this.isLocked())return bt(this.clone().ext(t));{const e=this.a,s=this.x,i=this.y,r=this.b,n=t.a,o=t.x,h=t.y,a=e*n,c=e*o+s*n,l=e*h+i*n,u=e*t.b+s*h-i*o+r*n;return this.set(c,l,a,u)}}inv(){if(this.isLocked())return bt(this.clone().inv());{const t=this.a,e=this.x,s=this.y,i=this.b,r=function(t,e){const s=t.length;for(let i=0;i<s;i++){const s=t[i],r=e[i];s.push(r)}for(let e=0;e<s;e++)dt(t,e,ut(t,e,s),s),ft(t,e,s);return function(t,e){const s=function(t,e){const s=[];for(let i=0;i<t;i++)s.push(e);return s}(e,0);for(let i=e-1;i>-1;i--){s[i]=t[i][e]/t[i][i];for(let r=i-1;r>-1;r--)t[r][e]-=t[r][i]*s[i]}return s}(t,s)}([[+t,+e,+s,-i],[+e,+t,-i,+s],[+s,+i,+t,-e],[+i,+s,-e,+t]],[1,0,0,0]),n=r[0],o=r[1],h=r[2],a=r[3];return this.set(o,h,n,a)}}lco(t){return this.isLocked()?bt(this.clone().lco(t)):this.#n(this,t)}#n(t,e){const s=t.a,i=t.x,r=t.y,n=t.b,o=e.a,h=e.x,a=e.y,c=e.b,l=s*o+i*h+r*a-n*c,u=s*h-r*c,d=s*a+i*c,f=s*c;return this.set(u,d,l,f)}add(t){if(this.isLocked())return bt(this.clone().add(t));{const e=this.x+t.x,s=this.y+t.y,i=this.a+t.a,r=this.b+t.b;return this.set(e,s,i,r)}}sub(t){if(this.isLocked())return bt(this.clone().sub(t));{const e=this.x-t.x,s=this.y-t.y,i=this.a-t.a,r=this.b-t.b;return this.set(e,s,i,r)}}mul(t){return this.isLocked()?bt(this.clone().mul(t)):this.#o(this,t)}#o(t,e){const s=t.a,i=t.x,r=t.y,n=t.b,o=e.a,h=e.x,a=e.y,c=e.b,l=s*o+i*h+r*a-n*c,u=s*h+i*o-r*c+n*a,d=s*a+i*c+r*o-n*h,f=s*c+i*a-r*h+n*o;return this.set(u,d,l,f)}neg(){return this.scale(-1)}dot(t){return this.x*t.x+this.y*t.y}exp(){if(this.isLocked())return bt(this.clone().exp());{const t=this.a,e=this.b,s=Math.exp(t),i=Math.sqrt(e*e),r=s*(0!==i?Math.sin(i)/i:1),n=s*Math.cos(i),o=e*r;return this.set(0,0,n,o)}}magnitude(){return Math.sqrt(this.quaditude())}quaditude(){const t=this.a,e=this.x,s=this.y,i=this.b;return t*t+e*e+s*s-i*i}normalize(){return this.isLocked()?bt(this.clone().normalize()):this.scale(1/this.magnitude())}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y;return e*e+s*s}rco(t){return this.isLocked()?bt(this.clone().rco(t)):this.#h(this,t)}#h(t,e){const s=t.a,i=t.x,r=t.y,n=t.b,o=e.a,h=e.x,a=e.y,c=s*o+i*h+r*a-n*e.b,l=i*o+n*a,u=r*o-n*h,d=n*o;return this.set(l,u,c,d)}reflect(t){if(this.isLocked())return bt(this.clone().reflect(t));{const e=t.x,s=t.y,i=this.a,r=this.x,n=this.y,o=e*e,h=s*s,a=o-h,c=-2*e*s,l=o+h,u=-l*i,d=c*n-a*r,f=c*r+a*n,p=l*this.b;return this.set(d,f,u,p)}}rotorFromDirections(t,e){return this.isLocked()?bt(this.clone().rotorFromDirections(t,e)):(function(t,e,s){const i=t.x,r=t.y,n=e.x,o=e.y,h=i*i+r*r,a=pt(h),c=n*n+o*o,l=pt(c)*a,u=i*n+r*o,d=pt(2*(c*h+l*u));if(0!==d){const t=r*n-i*o;s.set(0,0,(l+u)/d,t/d)}}(t,e,this),this)}rotorFromAngle(t){if(this.isLocked())return bt(this.clone().rotorFromAngle(t));{const e=t/2;return this.set(0,0,Math.cos(e),-Math.sin(e))}}rotorFromVectorToVector(t,e){if(this.isLocked())return bt(this.clone().rotorFromVectorToVector(t,e));{const s=t.x,i=t.y,r=e.x,n=e.y,o=Math.sqrt(r*r+n*n),h=Math.sqrt(s*s+i*i),a=o*h,c=r*s+n*i,l=r*i-n*s,u=Math.sqrt(2*a*(a+c)),d=Math.sqrt(o)/(Math.sqrt(h)*u),f=d*(a+c),p=d*l;return this.set(0,0,f,p)}}scale(t){if(this.isLocked())return bt(this.clone().scale(t));{const e=this.x*t,s=this.y*t,i=this.a*t,r=this.b*t;return this.set(e,s,i,r)}}scp(t){return this.isLocked()?bt(this.clone().scp(t)):this.#a(this,t)}#a(t,e){const s=t.a,i=t.x,r=t.y,n=t.b,o=s*e.a+i*e.x+r*e.y-n*e.b;return this.set(0,0,o,0)}set(t,e,s=0,i=0){if(this.isMutable()){if(this.x!==t||this.y!==e||this.a!==s||this.b!=i){const r=this.#s;r[0]=s,r[1]=t,r[2]=e,r[3]=i,this.#r.set(this)}return this}throw new Error}equals(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e}lerp(t,e){if(this.isLocked())return bt(this.clone().lerp(t,e));{const s=(t.x-this.x)*e+this.x,i=(t.y-this.y)*e+this.y,r=(t.a-this.a)*e+this.a,n=(t.b-this.b)*e+this.b;return this.set(s,i,r,n)}}isZero(t){return"number"==typeof t?Math.abs(this.a)<t&&Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.b)<t:0===this.a&&0===this.x&&0===this.y&&0===this.b}toString(){return JSON.stringify({x:this.x,y:this.y,a:this.a,b:this.b})}rev(){if(this.isMutable()){const t=+this.a,e=+this.x,s=+this.y,i=-this.b;return this.set(e,s,t,i)}return bt(this.clone().rev())}rotate(t){if(this.isMutable()){const e=this.x,s=this.y,i=Math.cos(t),r=Math.sin(t),n=e*i-s*r,o=e*r+s*i;return this.set(n,o,this.a,this.b)}return bt(this.clone().rotate(t))}subScalar(t,e=1){return this.isLocked()?bt(this.clone().subScalar(t,e)):this.isZero()?(this.a=-t*e,this):(0===t||0===e||(this.a-=t*e),this)}versor(t,e){if(this.isMutable()){const s=t.x*e.x+t.y*e.y,i=0,r=0,n=t.x*e.y-t.y*e.x;return this.set(i,r,s,n)}throw new Error}__div__(t){return t instanceof mt?bt(this.clone().div(t)):"number"==typeof t?bt(this.clone().scale(1/t)):void 0}__rdiv__(t){return t instanceof mt?bt(mt.copy(t).div(this)):"number"==typeof t?bt(mt.scalar(t).div(this)):void 0}__vbar__(t){return t instanceof mt?bt(mt.copy(this).scp(t)):"number"==typeof t?bt(mt.copy(this).scp(mt.scalar(t))):void 0}__rvbar__(t){return t instanceof mt?bt(mt.copy(t).scp(this)):"number"==typeof t?bt(mt.scalar(t).scp(this)):void 0}__wedge__(t){return t instanceof mt?bt(mt.copy(this).ext(t)):"number"==typeof t?bt(mt.copy(this).scale(t)):void 0}__rwedge__(t){return t instanceof mt?bt(mt.copy(t).ext(this)):"number"==typeof t?bt(mt.copy(this).scale(t)):void 0}__lshift__(t){return t instanceof mt?bt(mt.copy(this).lco(t)):"number"==typeof t?bt(mt.copy(this).lco(mt.scalar(t))):void 0}__rlshift__(t){return t instanceof mt?bt(mt.copy(t).lco(this)):"number"==typeof t?bt(mt.scalar(t).lco(this)):void 0}__rshift__(t){return t instanceof mt?bt(mt.copy(this).rco(t)):"number"==typeof t?bt(mt.copy(this).rco(mt.scalar(t))):void 0}__rrshift__(t){return t instanceof mt?bt(mt.copy(t).rco(this)):"number"==typeof t?bt(mt.scalar(t).rco(this)):void 0}__bang__(){return bt(mt.copy(this).inv())}__eq__(t){return t instanceof mt?this.equals(t):"number"==typeof t&&this.equals(mt.scalar(t))}__ne__(t){return t instanceof mt?!this.equals(t):"number"!=typeof t||!this.equals(mt.scalar(t))}__tilde__(){return bt(mt.copy(this).rev())}__add__(t){return t instanceof mt?bt(this.clone().add(t)):"number"==typeof t?bt(this.clone().addScalar(t,1)):void 0}__radd__(t){return t instanceof mt?bt(mt.copy(t).add(this)):"number"==typeof t?bt(mt.scalar(t).add(this)):void 0}__sub__(t){return t instanceof mt?bt(this.clone().sub(t)):"number"==typeof t?bt(this.clone().subScalar(t,1)):void 0}__rsub__(t){return t instanceof mt?bt(mt.copy(t).sub(this)):"number"==typeof t?bt(mt.scalar(t).sub(this)):void 0}__pos__(){return bt(mt.copy(this))}__neg__(){return bt(mt.copy(this).neg())}__mul__(t){return t instanceof mt?bt(this.clone().mul(t)):"number"==typeof t?bt(this.clone().scale(t)):void 0}__rmul__(t){return t instanceof mt?bt(mt.copy(t).mul(this)):"number"==typeof t?bt(mt.copy(this).scale(t)):void 0}}t("G20",mt);const yt="M",vt="L",xt="C",wt="A",_t="Z";class kt{origin;#c;controls={a:new mt,b:new mt};#l;#u;#d;#f;#p;#g;#z;#b;#m;#r=ct(this);change$=this.#r.asObservable();#y;constructor(t,e=yt,s=0,i=0,r=0,n=0){this.origin=t,this.controls.a.set(s,i),this.controls.b.set(r,n),this.#d=e,this.#f=!0,this.#p=0,this.#g=0,this.#z=0,this.#b=0,this.#m=1,this.#y=0,this.#c=this.origin.change$.subscribe((()=>{this.#r.set(this)})),this.#l=this.controls.a.change$.subscribe((()=>{this.#r.set(this)})),this.#u=this.controls.b.change$.subscribe((()=>{this.#r.set(this)}))}dispose(){this.#c&&this.#c.dispose(),this.#l&&this.#l.dispose(),this.#u&&this.#u.dispose()}get x(){return this.origin.x}set x(t){this.origin.x=t}get y(){return this.origin.y}set y(t){this.origin.y=t}get t(){return this.#y}set t(t){this.t!==t&&(this.#y=t)}copy(t){return this.origin.copyVector(t.origin),this.command=t.command,this.controls.a.copyVector(t.controls.a),this.controls.b.copyVector(t.controls.b),this.relative=t.relative,this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag,this}ignore(){throw new Error("TODO: Anchor.ignore()")}listen(){}get command(){return this.#d}set command(t){this.command!==t&&(this.#d=t)}get relative(){return this.#f}set relative(t){this.relative!==!!t&&(this.#f=t)}get rx(){return this.#p}set rx(t){this.rx!==t&&(this.#p=t)}get ry(){return this.#g}set ry(t){this.ry!==t&&(this.#g=t)}get xAxisRotation(){return this.#z}set xAxisRotation(t){this.xAxisRotation!==t&&(this.#z=t)}get largeArcFlag(){return this.#b}set largeArcFlag(t){this.largeArcFlag!==t&&(this.#b=t)}get sweepFlag(){return this.#m}set sweepFlag(t){this.sweepFlag!==t&&(this.#m=t)}}t("Anchor",kt);let At=0;const St="g2o-",Mt=12,Et=function(){return At++};class $t{#v;insert$;#x;remove$;#w;order$;#_;constructor(t){this.#_=t,this.#v=new j,this.insert$=new ht(this.#v.asObservable()),this.#x=new j,this.remove$=new ht(this.#x.asObservable()),this.#w=new j,this.order$=new ht(this.#w.asObservable())}forEach(t,e){this.#_.forEach(t,e)}get length(){return this.#_.length}getAt(t){return this.#_[t]}get(){return this.#_}ping(){this.#v.next(this.#_)}pop(){const t=this.#_.pop();return this.#x.next([t]),t}shift(){const t=this.#_.shift();return this.#x.next([t]),t}push(...t){const e=this.#_.push(...t);return this.#v.next(t),e}unshift(...t){const e=this.#_.unshift();return this.#v.next(t),e}splice(t,e,...s){if("number"==typeof e){const i=this.#_.splice(t,e,...s);return this.#x.next(i),i}{const e=this.#_.splice(t);return this.#x.next(e),e}}sort(t){return this.#_.sort(t),this.#w.next(),this}reverse(){return this.#_.reverse(),this.#w.next(),this}indexOf(t,e){return this.#_.indexOf(t,e)}map(t,e){return this.#_.map(t,e)}}t("Collection",$t);class Ot extends $t{ids={};#k;#A;constructor(t){super(t),this.#S(t),this.#k=this.insert$.subscribe((t=>{this.#S(t)})),this.#A=this.remove$.subscribe((t=>{this.#M(t)}))}dispose(){this.#k.dispose(),this.#A.dispose()}#S(t){for(let e=0;e<t.length;e++){const s=t[e];s&&s.id&&(this.ids[s.id]=s)}return this}#M(t){for(let e=0;e<t.length;e++){const s=t[e];delete this.ids[s.id]}return this}}var Ft;function Ct(t){for(let e=t.length-1;e>=0;e--)t[e].dispose();t.length=0}let Lt;t("Children",Ot),function(t){t[t.Additions=1]="Additions",t[t.Beginning=2]="Beginning",t[t.Cap=3]="Cap",t[t.ClassName=4]="ClassName",t[t.ClipFlag=5]="ClipFlag",t[t.ClipPath=6]="ClipPath",t[t.Columns=7]="Columns",t[t.EndAngle=8]="EndAngle",t[t.Ending=9]="Ending",t[t.Fill=10]="Fill",t[t.FrameRate=11]="FrameRate",t[t.Height=12]="Height",t[t.Index=13]="Index",t[t.Join=14]="Join",t[t.Length=15]="Length",t[t.Linewidth=16]="Linewidth",t[t.Matrix=17]="Matrix",t[t.Miter=18]="Miter",t[t.Order=19]="Order",t[t.Radius=20]="Radius",t[t.Rows=21]="Rows",t[t.Scale=22]="Scale",t[t.Sides=23]="Sides",t[t.Size=24]="Size",t[t.Spread=25]="Spread",t[t.StartAngle=26]="StartAngle",t[t.Stops=27]="Stops",t[t.Stroke=28]="Stroke",t[t.Subtractions=29]="Subtractions",t[t.Units=30]="Units",t[t.Vertices=31]="Vertices",t[t.VectorEffect=32]="VectorEffect",t[t.Width=33]="Width"}(Ft||(Ft={})),"undefined"!=typeof window?Lt=window:"undefined"!=typeof global?Lt=global:"undefined"!=typeof self&&(Lt=self);const Pt=2*Math.PI,Rt=.5*Math.PI;function Bt(t,e,s){return s*(e-t)+t}function Vt(t,e){for(;t<0;)t+=e;return t%e}const Wt=Lt.Float32Array||Array,jt=Math.floor;function It(t){return jt(1e6*t)/1e6}function Tt(t){const e=t.children,s=e.length;for(let t=0;t<s;t++){const s=e.item(t);if(s instanceof SVGDefsElement)return s}throw new Error}function Nt(t,e){t._flagUpdate=e}const qt={ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(t,e={}){const s=document.createElementNS(qt.ns,t);return e&&Object.keys(e).length>0&&qt.setAttributes(s,e),s},setAttributes:function(t,e){const s=e,i=Object.keys(e);for(let e=0;e<i.length;e++){const r=i[e],n=s[r];/href/.test(i[e])?t.setAttributeNS(qt.xlink,r,n):t.setAttribute(r,n)}return this},removeAttributes:function(t,e){for(const s in e)t.removeAttribute(s);return this},path_from_anchors:function(t,e,s,i,r){const[n,o]=function(t){return t.goofy?[(t,e)=>t,(t,e)=>e]:[(t,e)=>e,(t,e)=>t]}(t),h=i.length,a=h-1;let c,l="";for(let t=0;t<h;t++){const e=i[t],s=i[r?Vt(t-1,h):Math.max(t-1,0)];let u,d,f,p,g,z,b,m,y,v,x,w,_,k,A,S=It(n(e.x,e.y)),M=It(o(e.x,e.y));switch(e.command){case _t:u=_t;break;case wt:x=e.rx,w=e.ry,_=e.xAxisRotation,k=e.largeArcFlag,A=e.sweepFlag,u=wt+" "+x+" "+w+" "+_+" "+k+" "+A+" "+S+" "+M;break;case xt:b=s.controls&&s.controls.b||mt.zero,m=e.controls&&e.controls.a||mt.zero,s.relative?(f=It(n(b.x+s.x,b.y+s.y)),p=It(o(b.x+s.x,b.y+s.y))):(f=It(n(b.x,b.y)),p=It(o(b.x,b.y))),e.relative?(g=It(n(m.x+e.x,m.y+e.y)),z=It(o(m.x+e.x,m.y+e.y))):(g=It(n(m.x,m.y)),z=It(o(m.x,m.y))),u=(0===t?yt:xt)+" "+f+" "+p+" "+g+" "+z+" "+S+" "+M;break;case yt:c=e,u=yt+" "+S+" "+M;break;default:u=e.command+" "+S+" "+M}t>=a&&r&&(e.command===xt&&(d=c,y=e.controls&&e.controls.b||e,v=d.controls&&d.controls.a||d,e.relative?(f=It(n(y.x+e.x,y.y+e.y)),p=It(o(y.x+e.x,y.y+e.y))):(f=It(n(y.x,y.y)),p=It(o(y.x,y.y))),d.relative?(g=It(n(v.x+d.x,v.y+d.y)),z=It(o(v.x+d.x,v.y+d.y))):(g=It(n(v.x,v.y)),z=It(o(v.x,v.y))),S=It(n(d.x,d.y)),M=It(o(d.x,d.y)),u+=" C "+f+" "+p+" "+g+" "+z+" "+S+" "+M),e.command!==_t&&(u+=" Z")),l+=u+" "}return l},getClip:function(t,e){let s=t.zzz.clipPath;return s||(s=t.zzz.clipPath=qt.createElement("clipPath",{"clip-rule":"nonzero"})),null===s.parentNode&&Tt(e).appendChild(s),s},defs:{update:function(t,e){if(function(t){return t._flagUpdate}(e)){const s=Array.prototype.slice.call(e.children,0);for(let i=0;i<s.length;i++){const r=s[i],n=r.id,o=`[fill="url(#${n})"],[stroke="url(#${n})"],[clip-path="url(#${n})"]`;t.querySelector(o)||e.removeChild(r)}Nt(e,!1)}}}};class Yt{domElement;viewBox;defs;width;height;#E=ct({width:0,height:0});size$=this.#E.asObservable();constructor(t,e,s={}){if(!(t instanceof se))throw new Error("viewBox must be a Group");this.viewBox=t,this.viewBox.parent=null,s.domElement?this.domElement=s.domElement:this.domElement=qt.createElement("svg",{id:`${e}-svg`}),this.defs=qt.createElement("defs"),Nt(this.defs,!1),this.domElement.appendChild(this.defs),this.domElement.style.overflow="hidden"}setSize(t,e){return this.width=t.width,this.height=t.height,qt.setAttributes(this.domElement,{width:`${t.width}px`,height:`${t.height}px`}),this.#E.set(t),this}render(){const t=this.domElement;return this.viewBox.render(this.domElement,t),qt.defs.update(t,this.defs),this}}function Xt(t){return`matrix(${[t.a,t.b,t.c,t.d,t.e,t.f].map(It).join(" ")})`}class Ht{disposables=[];flags={};appended;anchor$;baseline$;#$=ct(!1);clip$=this.#$.asObservable();clipPath;context;decoration$;direction$;dx$;dy$;effect;elem;fill$;fillOpacity$;fontStyle$;fontWeight$;hasFillEffect;hasStrokeEffect;height$;image;offset;opacity$;radius$;scale;spreadMethod$;stroke$;strokeOpacity$;strokeWidth$;textContent$;units$;vertices;vertices_subject;vertices$;visibility$;width$;dispose(){Ct(this.disposables)}get clip(){return this.#$.get()}set clip(t){this.#$.set(t),this.flags[Ft.ClipFlag]=!0}}t("ZZZ",Ht);class Dt{parent;zzz=new Ht;#O;#F="";classList=[];constructor(t){this.#O=t,this.flagReset(!1)}dispose(){this.zzz.dispose()}flagReset(t=!1){return this.zzz.flags[Ft.ClassName]=t,this}get id(){return this.#O}get className(){return this.#F}set className(t){this.className!==t&&(this.zzz.flags[Ft.ClassName]=!0,this.classList=t.split(/\s+?/),this.#F=t)}}function Ut(t,e,s,i,r,n,o,h,a){const c=r*r-n*n,l=2*r*n,u=s,d=i,f=Math.tan(o),p=Math.tan(h),g=u*l,z=d*c,b=z*f,m=d*l,y=u*c-g*p+b*(f*p)*m,v=-g+b,x=t+f*e,w=z*p+m,_=z,k=e;a.set(y,v,x,w,_,k,0,0,1)}t("ElementBase",Dt);const Gt=Math.cos,Zt=Math.sin,Jt=Math.tan;class Qt{#r=ct(this);change$=this.#r.asObservable();#C=new Wt(9);manual=!1;#L=!0;constructor(t=1,e=0,s=0,i=0,r=1,n=0,o=0,h=0,a=1){this.#C[0]=t,this.#C[1]=e,this.#C[2]=s,this.#C[3]=i,this.#C[4]=r,this.#C[5]=n,this.#C[6]=o,this.#C[7]=h,this.#C[8]=a}get a(){return this.#C[0]}get b(){return this.#C[3]}get c(){return this.#C[1]}get d(){return this.#C[4]}get e(){return this.#C[2]}get f(){return this.#C[5]}get a11(){return this.#C[0]}get a12(){return this.#C[1]}get a13(){return this.#C[2]}get a21(){return this.#C[3]}get a22(){return this.#C[4]}get a23(){return this.#C[5]}get a31(){return this.#C[6]}get a32(){return this.#C[7]}get a33(){return this.#C[8]}set(t,e,s,i,r,n,o,h,a){return this.#C[0]=t,this.#C[1]=e,this.#C[2]=s,this.#C[3]=i,this.#C[4]=r,this.#C[5]=n,this.#C[6]=o,this.#C[7]=h,this.#C[8]=a,this.#P()}set_from_matrix(t){return this.#C[0]=t.a11,this.#C[1]=t.a12,this.#C[2]=t.a13,this.#C[3]=t.a21,this.#C[4]=t.a22,this.#C[5]=t.a23,this.#C[6]=t.a31,this.#C[7]=t.a32,this.#C[8]=t.a33,this.#P()}copy(t){return this.#C[0]=t.#C[0],this.#C[1]=t.#C[1],this.#C[2]=t.#C[2],this.#C[3]=t.#C[3],this.#C[4]=t.#C[4],this.#C[5]=t.#C[5],this.#C[6]=t.#C[6],this.#C[7]=t.#C[7],this.#C[8]=t.#C[8],this.manual=t.manual,this.#P()}identity(){return this.#C[0]=1,this.#C[1]=0,this.#C[2]=0,this.#C[3]=0,this.#C[4]=1,this.#C[5]=0,this.#C[6]=0,this.#C[7]=0,this.#C[8]=1,this.#P()}multiply(t,e,s,i,r,n,o,h,a){const c=this.#C,l=c[0],u=c[1],d=c[2],f=c[3],p=c[4],g=c[5],z=c[6],b=c[7],m=c[8];return this.#C[0]=l*t+u*i+d*o,this.#C[1]=l*e+u*r+d*h,this.#C[2]=l*s+u*n+d*a,this.#C[3]=f*t+p*i+g*o,this.#C[4]=f*e+p*r+g*h,this.#C[5]=f*s+p*n+g*a,this.#C[6]=z*t+b*i+m*o,this.#C[7]=z*e+b*r+m*h,this.#C[8]=z*s+b*n+m*a,this.#P()}multiply_vector(t=0,e=0,s=1){return[this.a11*t+this.a12*e+this.a13*s,this.a21*t+this.a22*e+this.a23*s,this.a31*t+this.a32*e+this.a33*s]}multiply_by_scalar(t){return this.#C[0]*=t,this.#C[1]*=t,this.#C[2]*=t,this.#C[3]*=t,this.#C[4]*=t,this.#C[5]*=t,this.#C[6]*=t,this.#C[7]*=t,this.#C[8]*=t,this.#P()}inverse(t){const e=this.#C;t=t||new Qt;const s=e[0],i=e[1],r=e[2],n=e[3],o=e[4],h=e[5],a=e[6],c=e[7],l=e[8],u=l*o-h*c,d=-l*n+h*a,f=c*n-o*a;let p=s*u+i*d+r*f;return p?(p=1/p,t.#C[0]=u*p,t.#C[1]=(-l*i+r*c)*p,t.#C[2]=(h*i-r*o)*p,t.#C[3]=d*p,t.#C[4]=(l*s-r*a)*p,t.#C[5]=(-h*s+r*n)*p,t.#C[6]=f*p,t.#C[7]=(-c*s+i*a)*p,t.#C[8]=(o*s-i*n)*p,t):null}scale(t,e){return 1===t&&1===e?this:this.multiply(t,0,0,0,e,0,0,0,1)}rotate(t){const e=Gt(t),s=Zt(t);return 1===e&&0===s?this:this.multiply(e,-s,0,s,e,0,0,0,1)}translate(t){return 0===t.x&&0===t.y?this:this.multiply(1,0,t.x,0,1,t.y,0,0,1)}skewX(t){if(0===t)return this;{const e=Jt(t);return this.multiply(1,e,0,0,1,0,0,0,1)}}skewY(t){if(0===t)return this;{const e=Jt(t);return this.multiply(1,0,0,e,1,0,0,0,1)}}silence(){return this.#L=!1,this}#P(){return this.#L&&this.#r.set(this),this}touch(){return this.#L=!0,this.#P()}}function Kt(t){return t.isMutable()?t:t.clone()}function te(t){return t instanceof ee?Kt(t.position):t instanceof mt?Kt(t):t instanceof kt?Kt(t.origin):Array.isArray(t)?mt.vector(t[0],t[1]):null}t("Matrix",Qt);class ee extends Dt{board;#R=null;#B=null;#V;#W;#j;#I;#T=new mt(1,1);#N=this.#T.change$.subscribe((()=>{this.zzz.flags[Ft.Matrix]=!0}));#q=ct(0);#Y=ct(0);#X=ct(1);#H=ct("visible");#D;#U=null;constructor(t,e={}){super(function(t){return"string"==typeof t.id?t.id:`${St}${Et()}`}(e)),this.board=t,this.zzz.opacity$=this.#X.asObservable(),this.zzz.visibility$=this.#H.asObservable(),this.flagReset(!0),this.matrix=new Qt,this.worldMatrix=new Qt,e.position?this.#V=te(e.position):this.#V=new mt(0,0),e.attitude?this.#j=e.attitude:this.#j=new mt(0,0,1,0),e.compensate?this.#D=e.compensate:this.#D=!1,"number"==typeof e.opacity&&this.#X.set(e.opacity),e.visibility&&this.#H.set(e.visibility),this.scale=1,this.skewX=0,this.skewY=0,this.#W=this.#G(),this.#I=this.#Z()}dispose(){this.#N.dispose(),this.#J(),this.#Q(),super.dispose()}#K(t){const e=this.position,s=e.x,i=e.y,r=this.attitude,n=this.scaleXY,o=n.x,h=n.y;if(this.board.goofy){Ut(s,i,o,h,r.a,r.b,this.skewX,this.skewY,this.matrix)}else if(t){const t=r.a,e=r.b;Ut(i,s,h,o,(t-e)/Math.SQRT2,(t+e)/Math.SQRT2,this.skewY,this.skewX,this.matrix)}else{Ut(i,s,h,o,r.a,r.b,this.skewY,this.skewX,this.matrix)}}update(){return!this.matrix.manual&&this.zzz.flags[Ft.Matrix]&&this.#K(this.#D),this}flagReset(t=!1){return this.zzz.flags[Ft.Vertices]=t,this.zzz.flags[Ft.Matrix]=t,this.zzz.flags[Ft.Scale]=t,super.flagReset(t),this}useAttitude(t){this.#Q(),this.#j=t,this.#I=this.#Z()}#Z(){return this.#j.change$.subscribe((()=>{this.#K(this.#D),this.zzz.flags[Ft.Matrix]=!0}))}#Q(){this.#I&&(this.#I.dispose(),this.#I=null)}usePosition(t){this.#J(),this.#V=t,this.#W=this.#G()}#G(){return this.#V.change$.subscribe((()=>{this.#K(this.#D),this.zzz.flags[Ft.Matrix]=!0}))}#J(){this.#W&&(this.#W.dispose(),this.#W=null)}get X(){return this.#V}set X(t){t instanceof mt&&this.#V.copyVector(t)}get position(){return this.#V}set position(t){t instanceof mt&&this.#V.copyVector(t)}get R(){return this.#j}set R(t){t instanceof mt&&this.#j.copySpinor(t)}get attitude(){return this.#j}set attitude(t){t instanceof mt&&this.#j.copySpinor(t)}get scale(){if(this.#T.x===this.#T.y)return this.#T.x;throw new Error}set scale(t){this.#T.x=t,this.#T.y=t,this.#K(this.#D),this.zzz.flags[Ft.Matrix]=!0,this.zzz.flags[Ft.Scale]=!0}get scaleXY(){return this.#T}set scaleXY(t){this.#T.set(t.x,t.y,0,0),this.zzz.flags[Ft.Matrix]=!0,this.zzz.flags[Ft.Scale]=!0}get skewX(){return this.#q.get()}set skewX(t){this.#q.set(t),this.zzz.flags[Ft.Matrix]=!0}get skewY(){return this.#Y.get()}set skewY(t){this.#Y.set(t),this.zzz.flags[Ft.Matrix]=!0}get clipPath(){return this.#U}set clipPath(t){this.#U=t,this.zzz.flags[Ft.ClipPath]=!0,t instanceof ee&&!t.zzz.clip&&(t.zzz.clip=!0)}get matrix(){return this.#R}set matrix(t){this.#R=t,this.zzz.flags[Ft.Matrix]=!0}get opacity(){return this.#X.get()}set opacity(t){"number"==typeof t&&t>=0&&t<=1&&this.opacity!==t&&this.#X.set(t)}get visibility(){return this.#H.get()}set visibility(t){"string"==typeof t&&this.visibility!==t&&this.#H.set(t)}show(){return this.visibility="visible",this}hide(){return this.visibility="hidden",this}collapse(){return this.visibility="collapse",this}get worldMatrix(){return function(t,e){e=e&&e.identity()||new Qt;let s=t;const i=[];for(;s&&s.matrix;)i.push(s.matrix),s=s.parent;i.reverse();for(let t=0;t<i.length;t++){const s=i[t];e.multiply(s.a11,s.a12,s.a13,s.a21,s.a22,s.a23,s.a31,s.a32,s.a33)}}(this,this.#B),this.#B}set worldMatrix(t){this.#B=t}}t("Shape",ee);class se extends ee{#tt=1;#et="round";#st="round";#it=4;#rt=!0;#nt=!1;#ot=!0;#ht=0;#at=1;#ct=0;#lt;#ut=null;#dt=null;#ft=null;additions=[];subtractions=[];constructor(t,e=[],s={}){super(t,function(t){const e={id:t.id};return e}(s)),this.flagReset(!0),this.zzz.flags[Ft.Additions]=!1,this.zzz.flags[Ft.Subtractions]=!1,this.zzz.flags[Ft.Beginning]=!1,this.zzz.flags[Ft.Ending]=!1,this.zzz.flags[Ft.Length]=!1,this.zzz.flags[Ft.Order]=!1,this.zzz.flags[Ft.ClipPath]=!1,this.#lt=new Ot(e),this.#pt()}dispose(){this.#gt(),this.#lt.dispose(),super.dispose()}hasBoundingBox(){return!1}render(t,e){this.update(),this.zzz.elem||(this.zzz.elem=qt.createElement("g",{id:this.id}),t.appendChild(this.zzz.elem),this.zzz.disposables.push(this.matrix.change$.subscribe((()=>{this.zzz.elem.setAttribute("transform",Xt(this.matrix))}))),this.zzz.disposables.push(this.zzz.opacity$.subscribe((t=>{const e={opacity:`${t}`};return 1===t?qt.removeAttributes(this.zzz.elem,e):qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.visibility$.subscribe((t=>{switch(t){case"visible":{const e={visibility:t};qt.removeAttributes(this.zzz.elem,e);break}default:{const e={visibility:t};qt.setAttributes(this.zzz.elem,e);break}}return function(){}}))));const s=this.matrix.manual||this.zzz.flags[Ft.Matrix],i={domElement:t,elem:this.zzz.elem};s&&this.zzz.elem.setAttribute("transform",Xt(this.matrix));for(let t=0;t<this.children.length;t++){const s=this.children.getAt(t),i=this.zzz.elem;s.render(i,e)}this.zzz.flags[Ft.ClassName]&&this.zzz.elem.setAttribute("class",this.classList.join(" ")),this.zzz.flags[Ft.Additions]&&this.additions.forEach((t=>{const e=t.zzz.elem;if(!e)return;const s=e.nodeName;!s||/(radial|linear)gradient/i.test(s)||t.zzz.clip||i.elem.appendChild(e)})),this.zzz.flags[Ft.Subtractions]&&this.subtractions.forEach((t=>{const e=t.zzz.elem;if(!e||e.parentNode!=i.elem)return;e.nodeName&&(t.zzz.clip||(Ct(t.zzz.disposables),i.elem.removeChild(e)))})),this.zzz.flags[Ft.Order]?this.children.forEach((t=>{i.elem.appendChild(t.zzz.elem)})):(this.zzz.flags[Ft.ClipPath]&&(this.clipPath?(this.clipPath.render(t,e),this.zzz.elem.setAttribute("clip-path","url(#"+this.clipPath.id+")")):this.zzz.elem.removeAttribute("clip-path")),this.flagReset())}#pt(){this.#ut=this.#lt.insert$.subscribe((t=>{for(const e of t)ie(e,this)})),this.#dt=this.#lt.remove$.subscribe((t=>{for(const e of t)ie(e,null)})),this.#ft=this.#lt.order$.subscribe((()=>{this.zzz.flags[Ft.Order]=!0}))}#gt(){this.#ut&&(this.#ut.dispose(),this.#ut=null),this.#dt&&(this.#dt.dispose(),this.#dt=null),this.#ft&&(this.#ft.dispose(),this.#ft=null)}corner(){const t=this.getBoundingBox(!0);for(let e=0;e<this.children.length;e++){const s=this.children.getAt(e);s.position.x-=t.left,s.position.y-=t.top}return this.clipPath&&(this.clipPath.position.x-=t.left,this.clipPath.position.y-=t.top),this}center(){const t=this.getBoundingBox(!0),e=(t.left+t.right)/2-this.position.x,s=(t.top+t.bottom)/2-this.position.y;for(let t=0;t<this.children.length;t++){const i=this.children.getAt(t);i.position.x-=e,i.position.y-=s}return this.clipPath&&(this.clipPath.position.x-=e,this.clipPath.position.y-=s),this}getById(t){let e=null;return function s(i){if(i.id===t)return i;if(i instanceof se&&i.children)for(let t=0;t<i.children.length;t++)if(e=s(i.children.getAt(t)),e)return e;return null}(this)}getByClassName(t){const e=[];return function s(i){if(Array.prototype.indexOf.call(i.classList,t)>=0&&e.push(i),i instanceof se&&i.children)for(let t=0;t<i.children.length;t++){s(i.children.getAt(t))}return e}(this)}getByType(t){const e=[];return function s(i){if(i instanceof t&&e.push(i),i instanceof se&&i.children)for(let t=0;t<i.children.length;t++){s(i.children.getAt(t))}return e}(this)}add(...t){for(let e=0;e<t.length;e++){const s=t[e];if(!s||!s.id)continue;const i=this.children.indexOf(s);i>=0&&this.children.splice(i,1),this.children.push(s)}return this}remove(...t){for(let e=0;e<t.length;e++){const s=t[e];s.dispose();const i=this.children.indexOf(s);i>=0&&this.children.splice(i,1)}return this}getBoundingBox(t=!1){this.update();let e=1/0,s=-1/0,i=1/0,r=-1/0;const n=t?this.matrix:this.worldMatrix;for(let o=0;o<this.children.length;o++){const h=this.children.getAt(o);if("visible"!==h.visibility||h.hasBoundingBox())continue;const a=h.getBoundingBox(t),c="number"!=typeof a.top||isNaN(a.top)||!isFinite(a.top),l="number"!=typeof a.left||isNaN(a.left)||!isFinite(a.left),u="number"!=typeof a.right||isNaN(a.right)||!isFinite(a.right),d="number"!=typeof a.bottom||isNaN(a.bottom)||!isFinite(a.bottom);if(!(c||l||u||d))if(t){const[t,o]=n.multiply_vector(a.left,a.top),[h,c]=n.multiply_vector(a.right,a.top),[l,u]=n.multiply_vector(a.left,a.bottom),[d,f]=n.multiply_vector(a.right,a.bottom);i=Math.min(o,c,u,f),e=Math.min(t,h,l,d),s=Math.max(t,h,l,d),r=Math.max(o,c,u,f)}else i=Math.min(a.top,i),e=Math.min(a.left,e),s=Math.max(a.right,s),r=Math.max(a.bottom,r)}return{top:i,left:e,right:s,bottom:r}}noFill(){return this.children.forEach((function(t){t.noFill()})),this}noStroke(){return this.children.forEach((function(t){t.noStroke()})),this}subdivide(t){return this.children.forEach((function(e){e.subdivide(t)})),this}update(){if(this.zzz.flags[Ft.Beginning]||this.zzz.flags[Ft.Ending]){const t=Math.min(this.beginning,this.ending),e=Math.max(this.beginning,this.ending),s=this.length;let i=0;const r=t*s,n=e*s;for(let t=0;t<this.children.length;t++){const e=this.children.getAt(t),s=e.length;r>i+s?(e.beginning=1,e.ending=1):n<i?(e.beginning=0,e.ending=0):r>i&&r<i+s?(e.beginning=(r-i)/s,e.ending=1):n>i&&n<i+s?(e.beginning=0,e.ending=(n-i)/s):(e.beginning=0,e.ending=1),i+=s}}return super.update()}flagReset(t=!1){return this.zzz.flags[Ft.Additions]&&(this.additions.length=0,this.zzz.flags[Ft.Additions]=t),this.zzz.flags[Ft.Subtractions]&&(this.subtractions.length=0,this.zzz.flags[Ft.Subtractions]=!1),this.zzz.flags[Ft.Order]=t,this.zzz.flags[Ft.ClipPath]=t,this.zzz.flags[Ft.Beginning]=t,this.zzz.flags[Ft.Ending]=t,super.flagReset(t),this}get automatic(){return this.#ot}set automatic(t){this.#ot=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).automatic=t}}get beginning(){return this.#ht}set beginning(t){"number"==typeof t&&this.beginning!==t&&(this.#ht=t,this.zzz.flags[Ft.Beginning]=!0)}get cap(){return this.#et}set cap(t){this.#et=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).cap=t}}get children(){return this.#lt}set children(t){this.#gt(),this.#lt.dispose(),this.#lt=t,this.#pt();for(let e=0;e<t.length;e++){ie(t.getAt(e),this)}}get closed(){return this.#rt}set closed(t){this.#rt=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).closed=t}}get curved(){return this.#nt}set curved(t){this.#nt=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).curved=t}}get ending(){return this.#at}set ending(t){"number"==typeof t&&this.ending!==t&&(this.#at=t,this.zzz.flags[Ft.Ending]=!0)}get fill(){throw new Error}set fill(t){for(let e=0;e<this.children.length;e++){this.children.getAt(e).fill=t}}get join(){return this.#st}set join(t){this.#st=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).join=t}}get length(){if(this.zzz.flags[Ft.Length]||this.#ct<=0){if(this.#ct=0,!this.children)return this.#ct;for(let t=0;t<this.children.length;t++){const e=this.children.getAt(t);this.#ct+=e.length}}return this.#ct}get strokeWidth(){return this.#tt}set strokeWidth(t){this.#tt=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).strokeWidth=t}}get miter(){return this.#it}set miter(t){this.#it=t;for(let e=0;e<this.children.length;e++){this.children.getAt(e).miter=t}}get stroke(){throw new Error}set stroke(t){for(let e=0;e<this.children.length;e++){this.children.getAt(e).stroke=t}}}function ie(t,e){const s=t.parent;if(s!==e){if(s&&s instanceof se&&s.children.ids[t.id]){const e=Array.prototype.indexOf.call(s.children,t);s.children.splice(e,1),r()}e?i():(r(),s&&s instanceof se&&(s.zzz.flags[Ft.Additions]&&0===s.additions.length&&(s.zzz.flags[Ft.Additions]=!1),s.zzz.flags[Ft.Subtractions]&&0===s.subtractions.length&&(s.zzz.flags[Ft.Subtractions]=!1)),delete t.parent)}else i();function i(){if(e.subtractions.length>0){const s=Array.prototype.indexOf.call(e.subtractions,t);s>=0&&e.subtractions.splice(s,1)}if(e.additions.length>0){const s=Array.prototype.indexOf.call(e.additions,t);s>=0&&e.additions.splice(s,1)}t.parent=e,e.additions.push(t),e.zzz.flags[Ft.Additions]=!0}function r(){if(s&&s instanceof se){const e=s.additions.indexOf(t);e>=0&&s.additions.splice(e,1);s.subtractions.indexOf(t)<0&&(s.subtractions.push(t),s.zzz.flags[Ft.Subtractions]=!0)}}}function re(t){if("string"==typeof t)return!1;if("object"==typeof t)return!0;throw new Error}function ne(t){return re(t)?`url(#${t.id})`:t}t("Group",se);const oe={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function he(t,e,s,i,r){const n=1-t;return n*n*n*e+3*n*n*t*s+3*n*t*t*i+t*t*t*r}function ae(t,e,s,i,r,n,o,h,a){if(t===s&&e===i&&r===o&&n===h){const s=o-t,i=h-e;return Math.sqrt(s*s+i*i)}const c=9*(s-r)+3*(o-t),l=6*(t+r)-12*s,u=3*(s-t),d=9*(i-n)+3*(h-e),f=6*(e+n)-12*i,p=3*(i-e);return function(t,e,s,i){const r=oe.abscissas[i-2],n=oe.weights[i-2],o=.5*(s-e),h=o+e;let a=0;const c=i+1>>1;let l=1&i?n[a++]*t(h):0;for(;a<c;){const e=o*r[a];l+=n[a++]*(t(h+e)+t(h-e))}return o*l}((function(t){const e=(c*t+l)*t+u,s=(d*t+f)*t+p;return Math.sqrt(e*e+s*s)}),0,1,a||oe.RecursionLimit)}function ce(t,e,s,i,r,n,o,h){const a=[],c=[[],[]];let l,u,d,f,p,g,z,b;for(let c=0;c<2;++c)if(0==c?(u=6*t-12*s+6*r,l=-3*t+9*s-9*r+3*o,d=3*s-3*t):(u=6*e-12*i+6*n,l=-3*e+9*i-9*n+3*h,d=3*i-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;f=-d/u,0<f&&f<1&&a.push(f)}else z=u*u-4*d*l,b=Math.sqrt(z),z<0||(p=(-u+b)/(2*l),0<p&&p<1&&a.push(p),g=(-u-b)/(2*l),0<g&&g<1&&a.push(g));const m=a.length;let y,v=m;for(;v--;)f=a[v],y=1-f,c[0][v]=y*y*y*t+3*y*y*f*s+3*y*f*f*r+f*f*f*o,c[1][v]=y*y*y*e+3*y*y*f*i+3*y*f*f*n+f*f*f*h;return c[0][m]=t,c[1][m]=e,c[0][m+1]=o,c[1][m+1]=h,c[0].length=c[1].length=m+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}}function le(t,e,s){const i=mt.angleBetween(t.origin,e.origin),r=mt.angleBetween(s.origin,e.origin);let n=mt.distanceBetween(t.origin,e.origin),o=mt.distanceBetween(s.origin,e.origin),h=(i+r)/2;return n<1e-4||o<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.a.copyVector(e.origin),e.controls.b.copyVector(e.origin)),e):(n*=.33,o*=.33,r<i?h+=Rt:h-=Rt,e.controls.a.x=Math.cos(h)*n,e.controls.a.y=Math.sin(h)*n,h-=Math.PI,e.controls.b.x=Math.cos(h)*o,e.controls.b.y=Math.sin(h)*o,"boolean"!=typeof e.relative||e.relative||(e.controls.a.x+=e.x,e.controls.a.y+=e.y,e.controls.b.x+=e.x,e.controls.b.y+=e.y),e)}function ue(t,e){if(0===e||1===e)return!0;const s=t.length*e;let i=0;const r=t.lengths;for(let t=0;t<r.length;t++){const e=r[t];if(i>=s)return s-i>=0;i+=e}return!1}function de(t,e){const s=t.length;if(e<=0)return 0;if(e>=s)return t.lengths.length-1;for(let s=0,i=0;s<t.lengths.length;s++){if(i+t.lengths[s]>=e)return e-=i,Math.max(s-1,0)+e/t.lengths[s];i+=t.lengths[s]}return-1}function fe(t,e,s){let i,r,n,o;const h=e.controls&&e.controls.b,a=t.controls&&t.controls.a,c=e.x,l=e.y;i=(h||e).x,n=(h||e).y,r=(a||t).x,o=(a||t).y;const u=t.x,d=t.y;return h&&e.relative&&(i+=e.x,n+=e.y),a&&t.relative&&(r+=t.x,o+=t.y),ae(c,l,i,n,r,o,u,d,s)}function pe(t,e,s){const i=e.controls.b,r=t.controls.a,n=e.x,o=e.y;let h=i.x,a=i.y,c=r.x,l=r.y;const u=t.x,d=t.y;e.relative&&(h+=e.x,a+=e.y),t.relative&&(c+=t.x,l+=t.y);return function(t,e,s,i,r,n,o,h,a,c=oe.RecursionLimit){const l=c+1;if(Math.abs(e-h)<.001&&Math.abs(s-a)<.001)return[t(h,a)];const u=[];for(let c=0;c<l;c++){const d=c/l,f=he(d,e,i,n,h),p=he(d,s,r,o,a);u.push(t(f,p))}return u}(((t,e)=>new kt(mt.vector(t,e))),n,o,h,a,c,l,u,d,s)}function ge(t){return t.offset}function ze(t,e){t.offset=e}const be=Math.min,me=Math.max,ye=new mt;class ve extends ee{#ct=0;#zt=[];#bt=ct("none");#mt=null;#yt=ct(1);#vt=ct("#000000");#xt=null;#tt=ct(1);#wt=ct(1);#_t="non-scaling-stroke";#et=ct("round");#st=ct("round");#it=ct(4);#rt=!0;#nt=!1;#ot=!0;#ht=0;#at=1;#kt=null;#At;#St=null;#Mt=null;#Et=[];#$t=new Map;constructor(t,e=[],s,i,r,n={}){super(t,n),this.zzz.fill$=this.#bt.asObservable(),this.zzz.fillOpacity$=this.#yt.asObservable(),this.zzz.stroke$=this.#vt.asObservable(),this.zzz.strokeOpacity$=this.#wt.asObservable(),this.zzz.strokeWidth$=this.#tt.asObservable(),this.flagReset(!0),this.zzz.flags[Ft.ClipPath]=!1,this.zzz.flags[Ft.ClipFlag]=!1,this.zzz.vertices=[],this.zzz.vertices_subject=ct(0),this.zzz.vertices$=this.zzz.vertices_subject.asObservable(),this.closed=!!s,this.curved=!!i,this.beginning=0,this.ending=1,n.fill?this.fill=n.fill:this.fill="#fff","number"==typeof n.fillOpacity?this.fillOpacity=n.fillOpacity:this.fillOpacity=1,n.stroke?this.stroke=n.stroke:this.stroke="#000","number"==typeof n.strokeWidth?this.strokeWidth=n.strokeWidth:this.strokeWidth=1,"number"==typeof n.strokeOpacity?this.strokeOpacity=n.strokeOpacity:this.strokeOpacity=1,this.className="",this.cap="butt",this.join="miter",this.miter=4,this.vertices=new $t(e),this.automatic=!r,this.dashes=[],ze(this.dashes,0)}render(t,e){this.update();const s={};if((this.matrix.manual||this.zzz.flags[Ft.Matrix])&&(s.transform=Xt(this.matrix)),this.fill&&re(this.fill)&&(this.zzz.hasFillEffect=!0,this.fill.render(e)),this.zzz.flags[Ft.Fill]&&(this.fill&&(s.fill=ne(this.fill)),this.zzz.hasFillEffect&&"string"==typeof this.fill&&(Nt(Tt(e),!0),delete this.zzz.hasFillEffect)),this.stroke&&re(this.stroke)&&(this.zzz.hasStrokeEffect=!0,this.stroke.render(e)),this.zzz.flags[Ft.Stroke]&&(this.stroke&&(s.stroke=ne(this.stroke)),this.zzz.hasStrokeEffect&&"string"==typeof this.stroke&&(Nt(Tt(e),!0),delete this.zzz.hasStrokeEffect)),this.zzz.flags[Ft.Linewidth]&&(s["stroke-width"]=`${this.strokeWidth}`),this.zzz.flags[Ft.ClassName]&&(s.class=this.classList.join(" ")),this.zzz.flags[Ft.VectorEffect]&&(s["vector-effect"]=this.vectorEffect),this.zzz.flags[Ft.Cap]&&(s["stroke-linecap"]=this.cap),this.zzz.flags[Ft.Join]&&(s["stroke-linejoin"]=this.join),this.zzz.flags[Ft.Miter]&&(s["stroke-miterlimit"]=`${this.miter}`),this.dashes&&this.dashes.length>0&&(s["stroke-dasharray"]=this.dashes.join(" "),s["stroke-dashoffset"]=`${ge(this.dashes)||0}`),this.zzz.elem?qt.setAttributes(this.zzz.elem,s):(s.id=this.id,this.zzz.elem=qt.createElement("path",s),t.appendChild(this.zzz.elem),this.zzz.disposables.push(this.matrix.change$.subscribe((t=>{const e={};e.transform=Xt(t),qt.setAttributes(this.zzz.elem,e)}))),this.zzz.disposables.push(this.zzz.vertices$.subscribe((()=>{const t={};t.d=qt.path_from_anchors(this.board,this.position,this.attitude,this.zzz.vertices,this.closed),qt.setAttributes(this.zzz.elem,t)}))),this.zzz.disposables.push(this.zzz.fill$.subscribe((t=>{const s={};return s.fill=ne(t),qt.setAttributes(this.zzz.elem,s),this.zzz.hasFillEffect&&"string"==typeof t&&(Nt(Tt(e),!0),delete this.zzz.hasFillEffect),function(){}}))),this.zzz.disposables.push(this.zzz.fillOpacity$.subscribe((t=>{const e={};return e["fill-opacity"]=`${t}`,qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.opacity$.subscribe((t=>{const e={opacity:`${t}`};return 1===t?qt.removeAttributes(this.zzz.elem,e):qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.stroke$.subscribe((t=>{const s={};return s.stroke=ne(t),qt.setAttributes(this.zzz.elem,s),this.zzz.hasStrokeEffect&&"string"==typeof t&&(Nt(Tt(e),!0),delete this.zzz.hasStrokeEffect),function(){}}))),this.zzz.disposables.push(this.zzz.strokeOpacity$.subscribe((t=>{const e={};return e["stroke-opacity"]=`${t}`,qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.strokeWidth$.subscribe((t=>{const e={};return e["stroke-width"]=`${t}`,qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.visibility$.subscribe((t=>{switch(t){case"visible":{const e={visibility:t};qt.removeAttributes(this.zzz.elem,e);break}default:{const e={visibility:t};qt.setAttributes(this.zzz.elem,e);break}}return function(){}})))),this.zzz.flags[Ft.ClipFlag]){const t=qt.getClip(this,e),s=this.zzz.elem;this.zzz.clip?(s.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(s)):(t.removeAttribute("id"),s.setAttribute("id",this.id),this.parent&&this.parent instanceof Dt&&this.parent.zzz.elem.appendChild(s))}this.zzz.flags[Ft.ClipPath]&&(this.clipPath?(this.clipPath.render(t,e),this.zzz.elem.setAttribute("clip-path","url(#"+this.clipPath.id+")")):this.zzz.elem.removeAttribute("clip-path")),this.flagReset()}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this}corner(){const t=this.getBoundingBox(!0),e=(t.right-t.left)/2,s=(t.bottom-t.top)/2,i=(t.left+t.right)/2,r=(t.top+t.bottom)/2;for(let t=0;t<this.vertices.length;t++){const n=this.vertices.getAt(t);n.x-=i,n.y-=r,n.x+=e,n.y+=s}return this.clipPath&&(this.clipPath.position.x-=i,this.clipPath.position.x+=e,this.clipPath.position.y-=r,this.clipPath.position.y+=s),this}center(){const t=this.getBoundingBox(!0),e=(t.left+t.right)/2-this.position.x,s=(t.top+t.bottom)/2-this.position.y;for(let t=0;t<this.vertices.length;t++){const i=this.vertices.getAt(t);i.x-=e,i.y-=s}return this.clipPath&&(this.clipPath.position.x-=e,this.clipPath.position.y-=s),this}getBoundingBox(t){let e=1/0,s=-1/0,i=1/0,r=-1/0;this.update();const n=t?this.matrix:this.worldMatrix;let o=(this.strokeWidth||0)/2;const h=this.zzz.vertices.length;if(this.strokeWidth>0||this.stroke&&"string"==typeof this.stroke&&!/(transparent|none)/i.test(this.stroke))if(this.matrix.manual){const{scaleX:t,scaleY:e}=function(t){const e=t.a11,s=t.a12,i=t.a13,r=t.a21,n=t.a22,o=t.a23;return{position:{x:i,y:o},translateX:i,translateY:o,scaleX:Math.sqrt(e*e+s*s),scaleY:Math.sqrt(r*r+n*n),rotation:Math.atan2(r,e)}}(n);o=me(t,e)*(this.strokeWidth||0)/2}else o*=me(this.scaleXY.x,this.scaleXY.y);if(h<=0)return{};for(let t=0;t<h;t++){const a=this.zzz.vertices[t],c=this.zzz.vertices[(t+h-1)%h],[l,u]=n.multiply_vector(c.x,c.y),[d,f]=n.multiply_vector(a.x,a.y);if(c.controls&&a.controls){let t=c.controls.b.x,h=c.controls.b.y;c.relative&&(t+=c.x,h+=c.y);const[p,g]=n.multiply_vector(t,h);let z=a.controls.a.x,b=a.controls.a.y;a.relative&&(z+=a.x,b+=a.y);const[m,y]=n.multiply_vector(z,b),v=ce(l,u,p,g,m,y,d,f);i=be(v.min.y-o,i),e=be(v.min.x-o,e),s=me(v.max.x+o,s),r=me(v.max.y+o,r)}else t<=1&&(i=be(u-o,i),e=be(l-o,e),s=me(l+o,s),r=me(u+o,r)),i=be(f-o,i),e=be(d-o,e),s=me(d+o,s),r=me(f+o,r)}return{top:i,left:e,right:s,bottom:r}}hasBoundingBox(){return!0}getPointAt(t,e){const s=e;let i=this.length*be(me(t,0),1);const r=this.vertices.length,n=r-1;let o=null,h=null;const a=this.#zt.length;let c=0;for(let e=0;e<a;e++){if(c+this.#zt[e]>=i){let s,a;this.closed?(s=Vt(e,r),a=Vt(e-1,r),0===e&&(s=a,a=e)):(s=e,a=be(me(e-1,0),n)),o=this.vertices.getAt(s),h=this.vertices.getAt(a),i-=c,t=0!==this.#zt[e]?i/this.#zt[e]:0;break}c+=this.#zt[e]}if(null===o||null===h)return null;if(!o)return h;if(!h)return o;const l=h.controls&&h.controls.b,u=o.controls&&o.controls.a,d=h.x,f=h.y;let p=(l||h).x,g=(l||h).y,z=(u||o).x,b=(u||o).y;const m=o.x,y=o.y;l&&h.relative&&(p+=h.x,g+=h.y),u&&o.relative&&(z+=o.x,b+=o.y);const v=he(t,d,p,z,m),x=he(t,f,g,b,y),w=Bt(d,p,t),_=Bt(f,g,t),k=Bt(p,z,t),A=Bt(g,b,t),S=Bt(z,m,t),M=Bt(b,y,t),E=Bt(w,k,t),$=Bt(_,A,t),O=Bt(k,S,t),F=Bt(A,M,t);return s.x=v,s.y=x,s.controls.a.x=E,s.controls.a.y=$,s.controls.b.x=O,s.controls.b.y=F,("boolean"!=typeof s.relative||s.relative)&&(s.controls.a.x-=v,s.controls.a.y-=x,s.controls.b.x-=v,s.controls.b.y-=x),s.t=t,s}plot(){if(this.curved)return function(t,e){const s=t.length,i=s-1;for(let r=0;r<s;r++){const n=t.getAt(r),o=e?Vt(r-1,s):Math.max(r-1,0),h=e?Vt(r+1,s):Math.min(r+1,i),a=n;le(t.getAt(o),a,t.getAt(h)),a.command=0===r?yt:xt}}(this.#At,this.closed),this;for(let t=0;t<this.#At.length;t++)this.#At.getAt(t).command=0===t?yt:vt;return this}subdivide(t){this.update();const e=this.vertices.length-1,s=this.closed||this.vertices.getAt(e).command===_t;let i,r=this.vertices.getAt(e),n=[];return this.vertices.forEach(((o,h)=>{if(h<=0&&!s)r=o;else{if(o.command===yt)return n.push(new kt(mt.vector(r.x,r.y))),h>0&&(n[n.length-1].command=vt),void(r=o);i=pe(o,r,t),n=n.concat(i),i.forEach((function(t,e){e<=0&&r.command===yt?t.command=yt:t.command=vt})),h>=e&&(this.closed&&this.automatic?(r=o,i=pe(o,r,t),n=n.concat(i),i.forEach((function(t,e){e<=0&&r.command===yt?t.command=yt:t.command=vt}))):s&&n.push(new kt(mt.vector(o.x,o.y))),n[n.length-1].command=s?_t:vt),r=o}})),this.automatic=!1,this.curved=!1,this.vertices=new $t(n),this}#Ot(t,e=!1){e||this.update();const s=this.vertices.length,i=s-1;let r=this.vertices.getAt(i),n=0;return this.vertices.forEach(((e,s)=>{if(s<=0||e.command===yt)return r=e,void(this.#zt[s]=0);this.#zt[s]=fe(e,r,t),n+=this.#zt[s],r=e})),this.#ct=n,this.zzz.flags[Ft.Length]=!1,this}update(){if(this.zzz.flags[Ft.Vertices]){this.automatic&&this.plot(),this.zzz.flags[Ft.Length]&&this.#Ot(void 0,!0);const t=this.closed,e=be(this.beginning,this.ending),s=me(this.beginning,this.ending),i=Math.ceil(de(this,e*this.length)),r=Math.floor(de(this,s*this.length));{let n,o;const h=this.vertices;this.zzz.vertices.length=0;{let o,a;const c=h.length;for(let l=0;l<c;l++)if(this.#Et.length<=l&&this.#Et.push(new kt(mt.vector(0,0))),l>r&&!o){const t=this.#Et[l].copy(h.getAt(l));this.getPointAt(s,t),t.command=this.#Et[l].command,this.zzz.vertices.push(t),o=t,a=h.getAt(l-1),a&&a.controls&&(t.relative?t.controls.b.clear():t.controls.b.copyVector(t.origin),a.relative?this.#Et[l-1].controls.b.copyVector(a.controls.b).lerp(mt.zero,1-t.t):this.#Et[l-1].controls.b.copyVector(a.controls.b).lerp(a.origin,1-t.t))}else if(l>=i&&l<=r){const a=this.#Et[l].copy(h.getAt(l));this.zzz.vertices.push(a),l===r&&ue(this,s)?(o=a,!t&&o.controls&&(o.relative?o.controls.b.clear():o.controls.b.copyVector(o.origin))):l===i&&ue(this,e)&&(n=a,n.command=yt,!t&&n.controls&&(n.relative?n.controls.a.clear():n.controls.a.copyVector(n.origin)))}}if(i>0&&!n){const t=i-1,s=this.#Et[t].copy(h.getAt(t));this.getPointAt(e,s),s.command=yt,this.zzz.vertices.unshift(s),o=h.getAt(t+1),o&&o.controls&&(s.controls.a.clear(),o.relative?this.#Et[t+1].controls.a.copyVector(o.controls.a).lerp(mt.zero,s.t):(ye.copyVector(o.origin),this.#Et[t+1].controls.a.copyVector(o.controls.a).lerp(o.origin,s.t)))}}this.zzz.vertices_subject.set(this.zzz.vertices_subject.get()+1)}return super.update(),this}flagReset(t=!1){return this.zzz.flags[Ft.Cap]=t,this.zzz.flags[Ft.ClipFlag]=t,this.zzz.flags[Ft.Fill]=t,this.zzz.flags[Ft.Join]=t,this.zzz.flags[Ft.Length]=t,this.zzz.flags[Ft.Linewidth]=t,this.zzz.flags[Ft.ClipPath]=t,this.zzz.flags[Ft.Miter]=t,this.zzz.flags[Ft.Stroke]=t,this.zzz.flags[Ft.VectorEffect]=t,this.zzz.flags[Ft.Vertices]=t,super.flagReset(t),this}get automatic(){return this.#ot}set automatic(t){t!==this.automatic&&(this.#ot=!!t,this.vertices.forEach((function(e){t?e.ignore():e.listen()})))}get beginning(){return this.#ht}set beginning(t){this.#ht=t,this.zzz.flags[Ft.Vertices]=!0}get cap(){return this.#et.get()}set cap(t){this.#et.set(t),this.zzz.flags[Ft.Cap]=!0}get closed(){return this.#rt}set closed(t){this.#rt=!!t,this.zzz.flags[Ft.Vertices]=!0}get curved(){return this.#nt}set curved(t){this.#nt=!!t,this.zzz.flags[Ft.Vertices]=!0}get dashes(){return this.#kt}set dashes(t){"number"!=typeof ge(t)&&ze(t,this.dashes&&ge(this.dashes)||0),this.#kt=t}get ending(){return this.#at}set ending(t){this.#at=t,this.zzz.flags[Ft.Vertices]=!0}get fill(){return this.#bt.get()}set fill(t){this.#mt&&(this.#mt.dispose(),this.#mt=null),this.#bt.set(t),this.zzz.flags[Ft.Fill]=!0,re(t)&&(this.#mt=t.change$.subscribe((()=>{this.zzz.flags[Ft.Fill]=!0})))}get fillOpacity(){return this.#yt.get()}set fillOpacity(t){this.#yt.set(t)}get join(){return this.#st.get()}set join(t){this.#st.set(t),this.zzz.flags[Ft.Join]=!0}get length(){return this.zzz.flags[Ft.Length]&&this.#Ot(),this.#ct}get lengths(){return this.#zt}get strokeWidth(){return this.#tt.get()}set strokeWidth(t){"number"==typeof t&&this.strokeWidth!==t&&(this.#tt.set(t),this.zzz.flags[Ft.Linewidth]=!0)}get miter(){return this.#it.get()}set miter(t){this.#it.set(t),this.zzz.flags[Ft.Miter]=!0}get stroke(){return this.#vt.get()}set stroke(t){this.#xt&&(this.#xt.dispose(),this.#xt=null),this.#vt.set(t),this.zzz.flags[Ft.Stroke]=!0,re(t)&&(this.#xt=t.change$.subscribe((()=>{this.zzz.flags[Ft.Stroke]=!0})))}get strokeOpacity(){return this.#wt.get()}set strokeOpacity(t){this.#wt.set(t)}get vertices(){return this.#At}set vertices(t){this.#St&&(this.#St.dispose(),this.#St=null),this.#Mt&&(this.#Mt.dispose(),this.#Mt=null),this.#At=t instanceof $t?t:new $t(t||[]),this.#St=this.vertices.insert$.subscribe((t=>{let e=t.length;for(;e--;){const s=t[e],i=s.change$.subscribe((()=>{this.zzz.flags[Ft.Vertices]=!0}));this.#$t.set(s,i)}this.zzz.flags[Ft.Vertices]=!0})),this.#Mt=this.vertices.remove$.subscribe((t=>{let e=t.length;for(;e--;){const s=t[e];this.#$t.get(s).dispose(),this.#$t.delete(s)}this.zzz.flags[Ft.Vertices]=!0})),this.vertices.forEach((t=>{const e=t.change$.subscribe((()=>{this.zzz.flags[Ft.Vertices]=!0}));this.#$t.set(t,e)}))}get vectorEffect(){return this.#_t}set vectorEffect(t){this.#_t=t,this.zzz.flags[Ft.VectorEffect]=!0}}t("Path",ve);class xe{params;constructor(t){this.params=t}createView(t,e){return new Yt(t,e,this.params)}}t("SVGViewFactory",xe);class we extends ve{_flagStartAngle=!1;_flagEndAngle=!1;_flagInnerRadius=!1;_flagOuterRadius=!1;_startAngle=0;_endAngle=Pt;_innerRadius=0;_outerRadius=0;constructor(t,e=0,s=0,i=0,r=0,n=0,o=2*Math.PI,h=24){const a=h||3*Mt,c=[];for(let t=0;t<a;t++)c.push(new kt(mt.vector(0,0)));super(t,c,!0,!1,!0),"number"==typeof i&&(this.innerRadius=i),"number"==typeof r&&(this.outerRadius=r),"number"==typeof n&&(this.startAngle=n),"number"==typeof o&&(this.endAngle=o),this.update(),"number"==typeof e&&(this.position.x=e),"number"==typeof s&&(this.position.y=s)}static Properties=["startAngle","endAngle","innerRadius","outerRadius"];update(){if(this.zzz.flags[Ft.Vertices]||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const t=this._startAngle,e=this._endAngle,s=this._innerRadius,i=this._outerRadius,r=Vt(t,Pt)===Vt(e,Pt),n=s>0,o=this.vertices;let h,a,c,l,u,d,f,p,g,z,b=n?o.length/2:o.length,m=0;for(r?b--:n||(b-=2),a=0,c=b-1;a<b;a++){if(l=a/c,u=o.getAt(m),d=l*(e-t)+t,f=(e-t)/b,p=i*Math.cos(d),g=i*Math.sin(d),0===a)h=yt;else h=xt;u.command=h,u.x=p,u.y=g,u.controls.a.clear(),u.controls.b.clear(),u.command===xt&&(z=i*f/Math.PI,u.controls.a.x=z*Math.cos(d-Rt),u.controls.a.y=z*Math.sin(d-Rt),u.controls.b.x=z*Math.cos(d+Rt),u.controls.b.y=z*Math.sin(d+Rt),1===a&&u.controls.a.scale(2),a===c&&u.controls.b.scale(2)),m++}if(n){for(r?(o.getAt(m).command=_t,m++):(b--,c=b-1),a=0;a<b;a++)l=a/c,u=o.getAt(m),d=(1-l)*(e-t)+t,f=(e-t)/b,p=s*Math.cos(d),g=s*Math.sin(d),h=xt,a<=0&&(h=r?yt:vt),u.command=h,u.x=p,u.y=g,u.controls.a.clear(),u.controls.b.clear(),u.command===xt&&(z=s*f/Math.PI,u.controls.a.x=z*Math.cos(d+Rt),u.controls.a.y=z*Math.sin(d+Rt),u.controls.b.x=z*Math.cos(d-Rt),u.controls.b.y=z*Math.sin(d-Rt),1===a&&u.controls.a.scale(2),a===c&&u.controls.b.scale(2)),m++;o.getAt(m).copy(o.getAt(0)),o.getAt(m).command=vt}else r||(o.getAt(m).command=vt,o.getAt(m).x=0,o.getAt(m).y=0,m++,o.getAt(m).copy(o.getAt(0)),o.getAt(m).command=vt)}return super.update(),this}flagReset(t=!1){return super.flagReset(t),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}get startAngle(){return this._startAngle}set startAngle(t){this._startAngle=t,this._flagStartAngle=!0}get endAngle(){return this._endAngle}set endAngle(t){this._endAngle=t,this._flagEndAngle=!0}get innerRadius(){return this._innerRadius}set innerRadius(t){this._innerRadius=t,this._flagInnerRadius=!0}get outerRadius(){return this._outerRadius}set outerRadius(t){this._outerRadius=t,this._flagOuterRadius=!0}}t("ArcSegment",we);class _e extends ve{#Ft=[];#Ct;#Lt;#Pt;constructor(t,e,s={}){super(t,[new kt(mt.vector(0,0),yt),new kt(mt.vector(0,0),vt),new kt(mt.vector(0,0),yt),new kt(mt.vector(0,0),vt),new kt(mt.vector(0,0),yt),new kt(mt.vector(0,0),vt)],!1,!1,!0,function(t){const e={id:t.id,position:t.position,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth};return e}(s)),this.#Pt=mt.zero.clone(),this.#Ct=te(e),"number"==typeof s.headLength?this.#Lt=mt.scalar(s.headLength):this.#Lt=mt.scalar(.25),this.noFill(),this.cap="round",this.join="round",this.#Ft.push(this.#Ct.change$.subscribe((()=>{this.#Rt()}))),this.#Ft.push(this.#Lt.change$.subscribe((()=>{this.#Rt()}))),this.#Ft.push(this.#Pt.change$.subscribe((()=>{this.#Rt()})))}dispose(){Ct(this.#Ft),super.dispose()}#Rt(){!function(t,e,s,i){const r=Math.atan2(t.y,t.x),n=Math.PI/6,o=i.getAt(0),h=i.getAt(1),a=i.getAt(2),c=i.getAt(3),l=i.getAt(4),u=i.getAt(5);o.origin.set(0,0).sub(s),h.origin.copyVector(t).sub(s),a.origin.copyVector(t).sub(s),c.origin.set(t.x-e*Math.cos(r-n),t.y-e*Math.sin(r-n)).sub(s),l.origin.copyVector(t).sub(s),u.origin.set(t.x-e*Math.cos(r+n),t.y-e*Math.sin(r+n)).sub(s)}(this.axis,this.headLength,this.origin,this.vertices),this.zzz.flags[Ft.Vertices]=!0,super.update()}update(){return this.zzz.flags[Ft.Vertices],super.update(),this}flagReset(t=!1){return super.flagReset(t),this}get axis(){return this.#Ct}set axis(t){t instanceof mt&&this.#Ct.copyVector(t)}get headLength(){return this.#Lt.a}set headLength(t){"number"==typeof t&&this.headLength!==t&&this.#Lt.set(0,0,t,0)}get origin(){return this.#Pt}set origin(t){t instanceof mt&&this.#Pt.copyVector(t)}}t("Arrow",_e);class ke extends ve{#Bt=ct(1);constructor(t,e={}){const s=e.resolution?Math.max(e.resolution,2):4,i=[];for(let t=0;t<s;t++)i.push(new kt(mt.vector(0,0)));var r;super(t,i,!0,!0,!0,{attitude:(r=e).attitude,position:r.position,fill:r.fill,fillOpacity:r.fillOpacity,stroke:r.stroke,strokeOpacity:r.strokeOpacity,strokeWidth:r.strokeWidth}),this.zzz.radius$=this.#Bt.asObservable(),"number"==typeof e.radius&&this.#Bt.set(e.radius),this.flagReset(!0),this.update()}dispose(){super.dispose()}update(){if(this.zzz.flags[Ft.Vertices]||this.zzz.flags[Ft.Radius]){let t=this.vertices.length;!this.closed&&t>2&&(t-=1);const e=4/3*Math.tan(Math.PI/(2*t)),s=this.radius,i=s*e,r=Math.cos,n=Math.sin;for(let e=0;e<this.vertices.length;e++){const o=e/t*Pt,h=s*r(o),a=s*n(o),c=i*r(o-Rt),l=i*n(o-Rt),u=i*r(o+Rt),d=i*n(o+Rt),f=this.vertices.getAt(e);f.command=0===e?yt:xt,f.origin.set(h,a),f.controls.a.set(c,l),f.controls.b.set(u,d)}}return super.update(),this}flagReset(t=!1){return this.zzz.flags[Ft.Radius]=t,super.flagReset(t),this}get radius(){return this.#Bt.get()}set radius(t){"number"==typeof t&&this.radius!==t&&(this.#Bt.set(t),this.zzz.flags[Ft.Radius]=!0,this.zzz.flags[Ft.Length]=!0,this.update())}}t("Circle",ke);const Ae=Math.cos,Se=Math.sin;class Me extends ve{_flagWidth=!1;_flagHeight=!1;_width=0;_height=0;constructor(t,e={}){const s=e.resolution?Math.max(e.resolution,2):4,i=[];for(let t=0;t<s;t++)i.push(new kt(mt.vector(0,0)));var r;super(t,i,!0,!0,!0,{id:(r=e).id,attitude:r.attitude,position:r.position,visibility:r.visibility}),"number"==typeof e.rx?this.width=2*e.rx:this.width=1,"number"==typeof e.ry?this.height=2*e.ry:this.height=1,this.flagReset(!0),this.update()}static Properties=["width","height"];update(){if(this.zzz.flags[Ft.Vertices]||this._flagWidth||this._flagHeight){let t=this.vertices.length;!this.closed&&t>2&&(t-=1);const e=4/3*Math.tan(Math.PI/(2*this.vertices.length)),s=this._width/2,i=this._height/2;for(let r=0;r<this.vertices.length;r++){const n=r/t*Pt,o=s*Ae(n),h=i*Se(n),a=s*e*Ae(n-Rt),c=i*e*Se(n-Rt),l=s*e*Ae(n+Rt),u=i*e*Se(n+Rt),d=this.vertices.getAt(r);d.command=0===r?yt:xt,d.origin.set(o,h),d.controls.a.set(a,c),d.controls.b.set(l,u)}}return super.update(),this}flagReset(t=!1){return this._flagWidth=t,this._flagHeight=t,super.flagReset(t),this}get height(){return this._height}set height(t){this._height=t,this._flagHeight=!0}get width(){return this._width}set width(t){this._width=t,this._flagWidth=!0}}t("Ellipse",Me);class Ee extends ve{constructor(t,e,s,i={}){super(t,[new kt(te(e),"M"),new kt(te(s),"L")],!1,!1,!1,function(t){const e={id:t.id,visibility:t.visibility,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth};return e}(i))}get point1(){return this.vertices.getAt(0)}set point1(t){if(t instanceof kt)this.vertices.splice(0,1,t);else{const t=new Error("Line.point1 argument is not an Anchor.");console.warn(t.name,t.message)}}get point2(){return this.vertices.getAt(1)}set point2(t){if(t instanceof kt)this.vertices.splice(1,1,t);else{const t=new Error("Line.point2 argument is not an Anchor.");console.warn(t.name,t.message)}}}t("Line",Ee);class $e extends ve{constructor(t,e=[],s={}){super(t,e.map((t=>te(t))).map(((t,e)=>new kt(t,0===e?"M":"L"))),!0,!1,!1,function(t){const e={id:t.id,opacity:t.opacity,fill:t.fill,fillOpacity:t.fillOpacity,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth};return e}(s)),this.flagReset(!0),this.update()}}t("Polygon",$e);class Oe extends ve{#Ft=[];#Vt=ct(1);#Wt=ct(1);#Pt=mt.zero.clone();constructor(t,e={}){super(t,[new kt(mt.vector(0,0),"M"),new kt(mt.vector(0,0),"L"),new kt(mt.vector(0,0),"L"),new kt(mt.vector(0,0),"L")],!0,!1,!0,function(t){const e={id:t.id,attitude:t.attitude,opacity:t.opacity,position:t.position,visibility:t.visibility,fill:t.fill,fillOpacity:t.fillOpacity,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth};return e}(e)),this.zzz.width$=this.#Vt.asObservable(),this.zzz.height$=this.#Wt.asObservable(),"number"==typeof e.width&&(this.width=e.width),"number"==typeof e.height&&(this.height=e.height),this.#Ft.push(this.#Pt.change$.subscribe((()=>{this.zzz.flags[Ft.Vertices]=!0}))),this.#Ft.push(this.zzz.width$.subscribe((t=>{Fe(t,this.height,this.origin,this.closed,this.vertices),this.zzz.flags[Ft.Vertices]=!0,this.zzz.flags[Ft.Matrix]=!0,super.update()}))),this.#Ft.push(this.zzz.height$.subscribe((t=>{Fe(this.width,t,this.origin,this.closed,this.vertices),this.zzz.flags[Ft.Vertices]=!0,this.zzz.flags[Ft.Matrix]=!0,super.update()}))),this.#Ft.push(this.#Pt.change$.subscribe((t=>{Fe(this.width,this.height,t,this.closed,this.vertices),this.zzz.flags[Ft.Vertices]=!0,this.zzz.flags[Ft.Matrix]=!0,super.update()}))),this.flagReset(!0),this.update()}dispose(){Ct(this.#Ft),super.dispose()}update(){return(this.zzz.flags[Ft.Vertices]||this.zzz.flags[Ft.Width]||this.zzz.flags[Ft.Height])&&Fe(this.width,this.height,this.origin,this.closed,this.vertices),super.update(),this}flagReset(t=!1){return this.zzz.flags[Ft.Width]=t,this.zzz.flags[Ft.Height]=t,super.flagReset(t),this}get height(){return this.#Wt.get()}set height(t){"number"==typeof t&&(this.#Wt.set(t),this.zzz.flags[Ft.Height]=!0)}get origin(){return this.#Pt}set origin(t){this.#Pt.copyVector(t),this.zzz.flags[Ft.Vertices]=!0}get width(){return this.#Vt.get()}set width(t){"number"==typeof t&&(this.#Vt.set(t),this.zzz.flags[Ft.Width]=!0)}}function Fe(t,e,s,i,r){const n=t/2,o=e/2;i||4!==r.length||r.push(new kt(mt.vector(0,0))),r.getAt(0).origin.set(-n,-o).sub(s),r.getAt(1).origin.set(n,-o).sub(s),r.getAt(2).origin.set(n,o).sub(s),r.getAt(3).origin.set(-n,o).sub(s);const h=r.getAt(4);h&&(h.origin.set(-n,-o).sub(s),h.command="L")}t("Rectangle",Oe);const Ce=Math.min,Le=Math.max;class Pe extends ee{automatic;beginning;cap;closed;curved;ending;join;length;miter;#jt=ct("");#It=ct("sans-serif");fontFamily$=this.#It.asObservable();#Tt=ct(13);fontSize$=this.#Tt.asObservable();#Nt=ct("start");#qt=ct("auto");#Yt=ct("normal");#Xt=ct("normal");#Ht=ct(["none"]);#Dt=ct("ltr");#Ut=ct(0);#Gt=ct(0);#bt=ct("#000000");#mt=null;#vt=ct("none");#xt=null;#tt=ct(1);#kt=null;constructor(t,e,s={}){super(t,function(t){const e={id:t.id,compensate:!0,position:t.position};return e}(s)),this.zzz.anchor$=this.#Nt.asObservable(),this.zzz.baseline$=this.#qt.asObservable(),this.zzz.decoration$=this.#Ht.asObservable(),this.zzz.direction$=this.#Dt.asObservable(),this.zzz.dx$=this.#Ut.asObservable(),this.zzz.dy$=this.#Gt.asObservable(),this.zzz.fill$=this.#bt.asObservable(),this.zzz.fontStyle$=this.#Yt.asObservable(),this.zzz.fontWeight$=this.#Xt.asObservable(),this.zzz.stroke$=this.#vt.asObservable(),this.zzz.strokeWidth$=this.#tt.asObservable(),this.zzz.textContent$=this.#jt.asObservable(),this.zzz.flags[Ft.Stroke]=!0,this.value=e,this.dashes=[],ze(this.dashes,0),s.anchor&&(this.anchor=s.anchor),s.baseline&&(this.baseline=s.baseline),s.decoration&&(this.decoration=s.decoration),s.direction&&(this.direction=s.direction),"number"!=typeof s.dx&&"string"!=typeof s.dx||(this.dx=s.dx),"number"!=typeof s.dy&&"string"!=typeof s.dy||(this.dy=s.dy),s.fontFamily&&(this.fontFamily=s.fontFamily),s.fill&&(this.fill=s.fill),s.strokeWidth&&(this.strokeWidth=s.strokeWidth),s.opacity&&(this.opacity=s.opacity),s.fontSize&&(this.fontSize=s.fontSize),s.stroke&&(this.stroke=s.stroke),s.fontStyle&&(this.fontStyle=s.fontStyle),s.value&&(this.value=s.value),"string"==typeof s.visibility&&(this.visibility=s.visibility),s.fontWeight&&(this.fontWeight=s.fontWeight),this.flagReset(!0)}render(t,e){this.update();const s={};(this.matrix.manual||this.zzz.flags[Ft.Matrix])&&(s.transform=Xt(this.matrix)),this.zzz.flags[Ft.Size]&&(s["font-size"]=`${this.fontSize}`);{const t=this.fill;t&&(re(t)?(this.zzz.hasFillEffect=!0,t.render(e)):(s.fill=ne(t),this.zzz.hasFillEffect&&(Nt(Tt(e),!0),delete this.zzz.hasFillEffect)))}{const t=this.stroke;t&&(re(t)?(this.zzz.hasStrokeEffect=!0,t.render(e)):(s.stroke=ne(t),this.zzz.hasStrokeEffect&&(Nt(Tt(e),!0),delete this.zzz.hasFillEffect)))}if(this.zzz.flags[Ft.ClassName]&&(s.class=this.classList.join(" ")),this.dashes&&this.dashes.length>0&&(s["stroke-dasharray"]=this.dashes.join(" "),s["stroke-dashoffset"]=`${ge(this.dashes)||0}`),this.zzz.elem?qt.setAttributes(this.zzz.elem,s):(s.id=this.id,this.zzz.elem=qt.createElement("text",s),t.appendChild(this.zzz.elem),this.zzz.disposables.push(this.matrix.change$.subscribe((t=>{const e={};e.transform=Xt(t),qt.setAttributes(this.zzz.elem,e)}))),this.zzz.disposables.push(this.zzz.anchor$.subscribe((t=>{switch(t){case"start":qt.removeAttributes(this.zzz.elem,{"text-anchor":t});break;case"middle":case"end":qt.setAttributes(this.zzz.elem,{"text-anchor":t})}return function(){}}))),this.zzz.disposables.push(this.zzz.decoration$.subscribe((t=>{const e={};return e["text-decoration"]=t.join(" "),qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.direction$.subscribe((t=>("rtl"===t?qt.setAttributes(this.zzz.elem,{direction:t}):qt.removeAttributes(this.zzz.elem,{direction:t}),function(){})))),this.zzz.disposables.push(this.zzz.baseline$.subscribe((t=>{if("auto"===t)qt.removeAttributes(this.zzz.elem,{"dominant-baseline":t});else qt.setAttributes(this.zzz.elem,{"dominant-baseline":t});return function(){}}))),this.zzz.disposables.push(this.zzz.dx$.subscribe((t=>("number"==typeof t&&0===t?qt.removeAttributes(this.zzz.elem,{dx:""}):qt.setAttributes(this.zzz.elem,{dx:`${t}`}),function(){})))),this.zzz.disposables.push(this.zzz.dy$.subscribe((t=>("number"==typeof t&&0===t?qt.removeAttributes(this.zzz.elem,{dy:""}):qt.setAttributes(this.zzz.elem,{dy:`${t}`}),function(){})))),this.zzz.disposables.push(this.fontFamily$.subscribe((t=>{qt.setAttributes(this.zzz.elem,{"font-family":t})}))),this.zzz.disposables.push(this.fontSize$.subscribe((t=>{qt.setAttributes(this.zzz.elem,{"font-size":`${t}`})}))),this.zzz.disposables.push(this.zzz.fontStyle$.subscribe((t=>{const e={"font-style":t};return"normal"===e["font-style"]?qt.removeAttributes(this.zzz.elem,e):qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.fontWeight$.subscribe((t=>{const e={"font-weight":`${t}`};return"normal"===e["font-weight"]?qt.removeAttributes(this.zzz.elem,e):qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.opacity$.subscribe((t=>{const e={opacity:`${t}`};return 1===t?qt.removeAttributes(this.zzz.elem,e):qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.strokeWidth$.subscribe((t=>{const e={};return e["stroke-width"]=`${t}`,qt.setAttributes(this.zzz.elem,e),function(){}}))),this.zzz.disposables.push(this.zzz.textContent$.subscribe((t=>{this.zzz.elem.textContent=t}))),this.zzz.disposables.push(this.zzz.visibility$.subscribe((t=>{switch(t){case"visible":{const e={visibility:t};qt.removeAttributes(this.zzz.elem,e);break}default:{const e={visibility:t};qt.setAttributes(this.zzz.elem,e);break}}return function(){}})))),this.zzz.flags[Ft.ClipFlag]){const t=qt.getClip(this,e),s=this.zzz.elem;this.zzz.clip?(s.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(s)):(t.removeAttribute("id"),s.setAttribute("id",this.id),this.parent instanceof Dt&&this.parent.zzz.elem.appendChild(s))}this.zzz.flags[Ft.ClipPath]&&(this.clipPath?(this.clipPath.render(t,e),this.zzz.elem.setAttribute("clip-path","url(#"+this.clipPath.id+")")):this.zzz.elem.removeAttribute("clip-path")),this.flagReset()}static Measure(t){return{width:t.value.length*t.fontSize*.6,height:t.fontSize}}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this}getBoundingBox(t=!1){let e,s,i,r;this.update();const n=t?this.matrix:this.worldMatrix,{width:o,height:h}=Pe.Measure(this),a=(this.strokeWidth||0)/2;switch(this.anchor){case"start":e=-a,s=o+a;break;case"middle":e=-(o/2+a),s=o/2+a;break;case"end":e=-(o+a),s=a}if("middle"===this.baseline)i=-(h/2+a),r=h/2+a;else i=-(h+a),r=a;const[c,l]=n.multiply_vector(e,i),[u,d]=n.multiply_vector(e,r),[f,p]=n.multiply_vector(s,i),[g,z]=n.multiply_vector(s,r);return i=Ce(l,d,p,z),e=Ce(c,u,f,g),s=Le(c,u,f,g),r=Le(l,d,p,z),{top:i,left:e,right:s,bottom:r}}hasBoundingBox(){return!0}subdivide(t){throw new Error("Method not implemented.")}flagReset(t=!1){return super.flagReset(t),this.zzz.flags[Ft.Size]=t,this.zzz.flags[Ft.Fill]=t,this.zzz.flags[Ft.Stroke]=t,this.zzz.flags[Ft.ClipFlag]=t,this.zzz.flags[Ft.ClassName]=t,this}get anchor(){return this.#Nt.get()}set anchor(t){if("string"==typeof t)switch(t){case"start":case"middle":case"end":this.#Nt.set(t)}}get baseline(){return this.#qt.get()}set baseline(t){if("string"==typeof t)switch(t){case"alphabetic":case"auto":case"central":case"hanging":case"ideographic":case"mathematical":case"middle":case"text-bottom":case"text-top":this.#qt.set(t)}}get dashes(){return this.#kt}set dashes(t){"number"!=typeof ge(t)&&ze(t,this.dashes&&ge(this.#kt)||0),this.#kt=t}get decoration(){return this.#Ht.get()}set decoration(t){this.#Ht.set(t)}get direction(){return this.#Dt.get()}set direction(t){"string"==typeof t&&("ltr"!==t&&"rtl"!==t||this.direction!==t&&this.#Dt.set(t))}get dx(){return this.#Ut.get()}set dx(t){"number"!=typeof t&&"string"!=typeof t||this.dx!==t&&this.#Ut.set(t)}get dy(){return this.#Gt.get()}set dy(t){"number"!=typeof t&&"string"!=typeof t||this.dy!==t&&this.#Gt.set(t)}get fontFamily(){return this.#It.get()}set fontFamily(t){"string"==typeof t&&this.fontFamily!==t&&this.#It.set(t)}get fill(){return this.#bt.get()}set fill(t){this.#mt&&(this.#mt.dispose(),this.#mt=null),this.#bt.set(t),this.zzz.flags[Ft.Fill]=!0,re(this.fill)&&(this.#mt=this.fill.change$.subscribe((()=>{this.zzz.flags[Ft.Fill]=!0})))}get strokeWidth(){return this.#tt.get()}set strokeWidth(t){"number"==typeof t&&this.strokeWidth!==t&&this.#tt.set(t)}get fontSize(){return this.#Tt.get()}set fontSize(t){"number"==typeof t&&this.fontSize!==t&&(this.#Tt.set(t),this.zzz.flags[Ft.Size]=!0)}get stroke(){return this.#vt.get()}set stroke(t){this.#xt&&(this.#xt.dispose(),this.#xt=null),this.#vt.set(t),this.zzz.flags[Ft.Stroke]=!0,re(this.stroke)&&(this.#xt=this.stroke.change$.subscribe((()=>{this.zzz.flags[Ft.Stroke]=!0})))}get fontStyle(){return this.#Yt.get()}set fontStyle(t){"string"==typeof t&&this.#Yt.set(t)}get value(){return this.#jt.get()}set value(t){"string"==typeof t&&this.value!==t&&this.#jt.set(t)}get fontWeight(){return this.#Xt.get()}set fontWeight(t){this.#Xt.set(t)}}t("Text",Pe);const Re=Lt.performance&&Lt.performance.now?Lt.performance:Date;t("Board",class{#Zt;#Jt=null;#Qt;#Kt;width=0;height=0;#E=ct({width:this.width,height:this.height});size$=this.#E.asObservable();ratio=void 0;#te;#ee=ct(0);frameCount$=this.#ee.asObservable();#se=null;#ie=null;#re={left:-5,top:5,right:5,bottom:-5};goofy;constructor(t,e={}){const s=function(t){return"string"==typeof t?document.getElementById(t):t}(t),i=function(t){return"string"==typeof t?t:t.id}(t);if(this.#Qt=new se(this,[],{id:`${i}-viewbox`}),"object"==typeof e.boundingBox){const t=e.boundingBox.left,s=e.boundingBox.top,i=e.boundingBox.right,r=e.boundingBox.bottom;this.#re.left=t,this.#re.top=s,this.#re.right=i,this.#re.bottom=r,this.goofy=r>s}else this.goofy=!1;e.scene instanceof se?this.#Kt=e.scene:this.#Kt=new se(this,[],{id:`${i}-scene`}),this.#Qt.add(this.#Kt),"object"==typeof e.viewFactory?this.#Zt=e.viewFactory.createView(this.#Qt,i):this.#Zt=(new xe).createView(this.#Qt,i);const r=function(t,e){const s={resizeTo:Ve(t,e),size:We(t,e)};return s}(s,e);if(this.#te=new Be(this,this.#Zt),s instanceof HTMLElement&&(this.#te.set_target(s),this.#te.subscribe(),this.#te.resize()),s instanceof HTMLElement&&this.appendTo(s),r.size&&this.#Zt.setSize(r.size,this.ratio),"object"!=typeof this.#Zt.size$)throw new Error("view.size$ MUST be defined");this.#Jt=this.#Zt.size$.subscribe((({width:t,height:e})=>{this.width=t,this.height=e,this.#ne(),this.#E.set({width:t,height:e})}))}dispose(){this.#Jt&&(this.#Jt.dispose(),this.#Jt=null),this.#te.unsubscribe()}#ne(){const{left:t,top:e,right:s,bottom:i}=this.getBoundingBox(),r=this.width,n=this.height,o=s-t,h=e-i,a=r/o,c=n/h,l=-t*r/o,u=-i*n/h;this.#Qt.position.set(l,u),this.goofy||this.#Qt.attitude.rotorFromAngle(Math.PI/2),this.#Qt.scaleXY.set(a,c)}get scaleXY(){return this.#Qt.scaleXY.clone()}get scene(){return this.#Kt}appendTo(t){if(t&&"number"==typeof t.nodeType&&t.nodeType===Node.ELEMENT_NODE){const e=this.#Zt.domElement;if(!(e instanceof SVGElement||e instanceof HTMLCanvasElement))throw new Error("domElement must be an SVGElement or HTMLCanvasElement");t.appendChild(this.#Zt.domElement),this.#te.is_target_body()||this.#te.set_target(t),this.update()}return this}getBoundingBox(){return this.#re}getElapsedTime(t=3){return"number"==typeof this.#ie?parseFloat((this.#se-this.#ie).toFixed(t)):null}update(){this.#ie=this.#se,this.#se=Re.now(),this.#te.has_target()&&!this.#te.is_bound()&&(this.#te.subscribe(),this.#te.resize());const t=this.width,e=this.height,s=this.#Zt;t===s.width&&e===s.height||s.setSize({width:t,height:e},this.ratio),this.#Zt.render(),this.#ee.set(this.#ee.get()+1)}add(...t){return this.#Kt.add(...t),this.update(),this}remove(...t){return this.#Kt.remove(...t),this.update(),this}circle(t={}){const e=new ke(this,t);return this.add(e),e}ellipse(t={}){const e=new Me(this,t);return this.add(e),e}line(t,e,s={}){const i=new Ee(this,t,e,s);return this.add(i),i}path(t,...e){const s=new ve(this,e,t),i=s.getBoundingBox();return"number"==typeof i.top&&"number"==typeof i.left&&"number"==typeof i.right&&"number"==typeof i.bottom&&s.center().position.set((i.left+i.right)/2,(i.top+i.bottom)/2),this.add(s),s}point(t,e={}){const{left:s,top:i,right:r,bottom:n}=this.getBoundingBox(),o={position:t,rx:4/(this.width/(i-s)),ry:4/(this.height/(n-r)),id:e.id,visibility:e.visibility},h=new Me(this,o);return this.add(h),h}polygon(t=[],e={}){const s=new $e(this,t,e);return this.add(s),s}rectangle(t){const e=new Oe(this,t);return this.add(e),e}text(t,e){const s=new Pe(this,t,e);return this.add(s),s}arrow(t,e={}){const s=new _e(this,t,e);return this.add(s),s}curve(t,...e){const s=new ve(this,e,t,!0),i=s.getBoundingBox();return s.center().position.set((i.left+i.right)/2,(i.top+i.bottom)/2),this.add(s),s}arc(t,e,s,i,r,n,o=Mt){const h=new we(this,t,e,s,i,r,n,o);return this.add(h),h}group(...t){const e=new se(this,t);return this.add(e),e}});class Be{#oe;#Zt;#he;#ae=null;#ce=null;constructor(t,e){this.#oe=t,this.#Zt=e,this.#he=e.domElement}dispose(){this.unsubscribe()}is_bound(){return!!this.#ce}subscribe(){var t,e;this.unsubscribe(),this.#ce=nt(this.#ae,"resize").pipe((t=200,void 0===e&&(e=D),R((function(s,i){var r=null,n=null,o=null,h=function(){if(r){r.unsubscribe(),r=null;var t=n;n=null,i.next(t)}};function a(){var s=o+t,n=e.now();if(n<s)return r=this.schedule(void 0,s-n),void i.add(r);h()}s.subscribe(B(i,(function(s){n=s,o=e.now(),r||(r=e.schedule(a,t),i.add(r))}),(function(){h(),i.complete()}),void 0,(function(){n=r=null})))})))).subscribe((()=>{this.resize()}))}unsubscribe(){this.#ce&&(this.#ce.unsubscribe(),this.#ce=null)}has_target(){return!!this.#ae}set_target(t){return this.#ae=t,this.is_target_body()&&(document.body.style.overflow="hidden",document.body.style.margin="0",document.body.style.padding="0",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0",document.body.style.position="fixed",this.#he.style.display="block",this.#he.style.top="0",this.#he.style.left="0",this.#he.style.right="0",this.#he.style.bottom="0",this.#he.style.position="fixed"),this}is_target_body(){return this.#ae===document.body}resize(){const t=this.#oe,e=this.#ae.getBoundingClientRect();t.width=e.width,t.height=e.height,this.#Zt.setSize(e,t.ratio)}}function Ve(t,e){return e.resizeTo?e.resizeTo:t}function We(t,e){return"object"==typeof e.size?e.size:t?null:{width:640,height:480}}}}}));
//# sourceMappingURL=index.min.js.map
